--if not _G["__FROM_LOADER__"] then
  --  warn("⚠️ Use o loadstring para executar este script.")
    --return
--end
local encoded = "cHJpbnQoIkV4ZWN1dGFuZG8gc2NyaXB0IHNlY3JldG8uIikKbG9jYWwgdG9rZW4gPSAic2VuaGExMjMiCmxvY2FsIGpvZ2Fkb3IgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIKcHJpbnQoIkpvZ2Fkb3I6ICIuLmpvZ2Fkb3IuTmFtZSkKCi0tIFNlcnZpw6dvcyBlIHZhcmnDoXZlaXMgaW5pY2lhaXMgCmxvY2FsIFBsYXllcnMgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKSAKIAoKbG9jYWwgcGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllciAgCmxvY2FsIFJlcGxpY2F0ZWRTdG9yYWdlID0gZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpICAKbG9jYWwgY2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlciBvciBwbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpICAKbG9jYWwgQ2FtZXJhID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYSAgCmxvY2FsIFJ1blNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKSAgCmxvY2FsIFR3ZWVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIikKbG9jYWwgaHJwID0gY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgIApsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKCmxvY2FsIGNvbm5lY3Rpb25zID0gbmlsCgpsb2NhbCBlc3BFbmFibGVkID0gZmFsc2UgIApsb2NhbCBlc3BMaW5lcyA9IHt9ICAKbG9jYWwgZXNwQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSAgCmxvY2FsIEVTUF9XaW5kb3cgPSBuaWwgIApsb2NhbCBFU1BfQXRpdm8gPSBmYWxzZSAgCgpsb2NhbCBvcmlnaW5hbFBvc2l0aW9uID0gbmlsICAKbG9jYWwgaXNGcm96ZW4gPSBmYWxzZSAgCgoKbG9jYWwgTG9jYWxQbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIGNoYW1zUiwgY2hhbXNHLCBjaGFtc0IgPSAyNTUsIDAsIDAKbG9jYWwgY2hhbXNFbmFibGVkID0gZmFsc2UKbG9jYWwgY29ubmVjdGlvbnMgPSB7fQpsb2NhbCBzbGlkZXJzQ3JpYWRvcyA9IGZhbHNlCmxvY2FsIGxvb3BDb25uCgpsb2NhbCBvcmJpdEVuYWJsZWQgPSBmYWxzZQpsb2NhbCBvcmJpdFNsaWRlcnNDcmlhZG9zID0gZmFsc2UKbG9jYWwgb3JiaXRDb25uZWN0aW9ucyA9IHt9CmxvY2FsIG9yYml0TGlnaHRCbG9ja3MgPSB7fQoKLS0gVmFyacOhdmVpcyBpbmljaWFpcyAobm8gaW7DrWNpbyBkbyBzZXUgc2NyaXB0KQpsb2NhbCBlc3BTbGlkZXJzQ3JpYWRvcyA9IGZhbHNlCiAgICAgCmxvY2FsIGZ1bmN0aW9uIGFwbGljYXJFc3RpbG8odWksIGNvciwgcmFpbykKCWxvY2FsIHVpQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCgl1aUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCByYWlvIG9yIDYpCgl1aUNvcm5lci5QYXJlbnQgPSB1aQoKCWxvY2FsIHN0cm9rZSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQoJc3Ryb2tlLlRoaWNrbmVzcyA9IDEuMgoJc3Ryb2tlLkNvbG9yID0gY29yIG9yIENvbG9yMy5mcm9tUkdCKDcwLCA3MCwgNzApCglzdHJva2UuUGFyZW50ID0gdWkKZW5kCgoKCi0tIENyaWEgYSBTY3JlZW5HdWkgZSBkZWZpbmUgY29tbyBwYWkgIApsb2NhbCBzY3JlZW5HdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpICAKc2NyZWVuR3VpLk5hbWUgPSAia2RuZGlla2RuZmpqZCIgIApzY3JlZW5HdWkuUGFyZW50ID0gZ2FtZS5Db3JlR3VpCgotLSBDcmlhIGEgamFuZWxhIHByaW5jaXBhbCAoTWFpbkZyYW1lKQpsb2NhbCBtYWluRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKbWFpbkZyYW1lLk5hbWUgPSAiTWFpbkZyYW1lIgptYWluRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCA0ODgsIDAsIDM0MCkKbWFpbkZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTIwMCwgMC41LCAtMTUwKQptYWluRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1LCAyNSwgMjUpCm1haW5GcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAptYWluRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAptYWluRnJhbWUuQWN0aXZlID0gdHJ1ZQptYWluRnJhbWUuRHJhZ2dhYmxlID0gdHJ1ZQptYWluRnJhbWUuUGFyZW50ID0gc2NyZWVuR3VpCmFwbGljYXJFc3RpbG8obWFpbkZyYW1lLCBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKSwgMTApCgpsb2NhbCBQYXJ0aWNsZUNhbnZhcyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpQYXJ0aWNsZUNhbnZhcy5OYW1lID0gIlBhcnRpY2xlQ2FudmFzIgpQYXJ0aWNsZUNhbnZhcy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpQYXJ0aWNsZUNhbnZhcy5Cb3JkZXJTaXplUGl4ZWwgPSAwClBhcnRpY2xlQ2FudmFzLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKUGFydGljbGVDYW52YXMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKUGFydGljbGVDYW52YXMuWkluZGV4ID0gMQpQYXJ0aWNsZUNhbnZhcy5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQpQYXJ0aWNsZUNhbnZhcy5QYXJlbnQgPSBtYWluRnJhbWUKCgotLSBDcmlhIGEgYmFycmEgZGUgdMOtdHVsbwpsb2NhbCB0aXRsZUxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQp0aXRsZUxhYmVsLk5hbWUgPSAiVGl0bGVMYWJlbCIKdGl0bGVMYWJlbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDM1KQp0aXRsZUxhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyMCwgMjAsIDIwKQp0aXRsZUxhYmVsLlRleHQgPSAiQnkgSmhvbmFEZXYxMzkiCnRpdGxlTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKdGl0bGVMYWJlbC5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKdGl0bGVMYWJlbC5UZXh0U2l6ZSA9IDE0CnRpdGxlTGFiZWwuUGFyZW50ID0gbWFpbkZyYW1lCmFwbGljYXJFc3RpbG8odGl0bGVMYWJlbCwgQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCksIDEwKQoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSU5JQ0lPCgotLSBUaXBvcyBkZSBwYXJ0w61jdWxhcwpsb2NhbCB0aXBvQXR1YWwgPSAxCgpsb2NhbCBQYXJ0aWNsZUZvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikgIApQYXJ0aWNsZUZvbGRlci5OYW1lID0gIlBhcnRpY3VsYXNWaXN1YWwiICAKUGFydGljbGVGb2xkZXIuUGFyZW50ID0gUGFydGljbGVDYW52YXMKCmxvY2FsIGZ1bmN0aW9uIHNlbVBhcnRpY3VsYSgpCnByaW50KCdlc2NhcGUnKQplbmQKCmxvY2FsIGZ1bmN0aW9uIGNyaWFyUGFydGljdWxhRm9nbygpCmxvY2FsIHBhcnQgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKcGFydC5TaXplID0gVURpbTIubmV3KDAsIG1hdGgucmFuZG9tKDIsIDQpLCAwLCBtYXRoLnJhbmRvbSg0LCA4KSkKcGFydC5Qb3NpdGlvbiA9IFVEaW0yLm5ldyhtYXRoLnJhbmRvbSgpLCAwLCAxLCAwKQpwYXJ0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAxKQpwYXJ0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQihtYXRoLnJhbmRvbSgyMjAsMjU1KSwgbWF0aC5yYW5kb20oMTAwLDE1MCksIDApCnBhcnQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKcGFydC5Cb3JkZXJTaXplUGl4ZWwgPSAwCnBhcnQuWkluZGV4ID0gMgpwYXJ0LlBhcmVudCA9IFBhcnRpY2xlQ2FudmFzCgpsb2NhbCBpbmZvID0gVHdlZW5JbmZvLm5ldygyLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhciwgRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0KQpsb2NhbCBnb2FsID0gewpQb3NpdGlvbiA9IHBhcnQuUG9zaXRpb24gLSBVRGltMi5uZXcobWF0aC5yYW5kb20oLTMsMykvMTAwLCAwLCBtYXRoLnJhbmRvbSg0MCw2MCkvMTAwLCAwKSwKQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKfQpsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocGFydCwgaW5mbywgZ29hbCkKdHdlZW46UGxheSgpCnR3ZWVuLkNvbXBsZXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKcGFydDpEZXN0cm95KCkKZW5kKQoKZW5kCgpsb2NhbCBmdW5jdGlvbiBjcmlhclBhcnRpY3VsYU5lb24oKQpsb2NhbCBwYXJ0ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCnBhcnQuU2l6ZSA9IFVEaW0yLm5ldygwLCA2LCAwLCA2KQpwYXJ0LlBvc2l0aW9uID0gVURpbTIubmV3KG1hdGgucmFuZG9tKCksIDAsIG1hdGgucmFuZG9tKCksIDApCnBhcnQuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKcGFydC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IobWF0aC5yYW5kb20oMTAwLDI1NSksIDAsIDI1NSkKcGFydC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4yCnBhcnQuQm9yZGVyU2l6ZVBpeGVsID0gMApwYXJ0LlpJbmRleCA9IDIKcGFydC5QYXJlbnQgPSBQYXJ0aWNsZUNhbnZhcwoKbG9jYWwgaW5mbyA9IFR3ZWVuSW5mby5uZXcoMS41LCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCkKbG9jYWwgZ29hbCA9IHsKU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKSwKQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKfQpsb2NhbCB0d2VlbiA9IFR3ZWVuU2VydmljZTpDcmVhdGUocGFydCwgaW5mbywgZ29hbCkKdHdlZW46UGxheSgpCnR3ZWVuLkNvbXBsZXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKcGFydDpEZXN0cm95KCkKZW5kKQoKZW5kCgpsb2NhbCBmdW5jdGlvbiBjcmlhclBhcnRpY3VsYUNodXZhKCkKbG9jYWwgcGFydCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQpwYXJ0LlNpemUgPSBVRGltMi5uZXcoMCwgMiwgMCwgMTIpCnBhcnQuUG9zaXRpb24gPSBVRGltMi5uZXcobWF0aC5yYW5kb20oKSwgMCwgMCwgLTEwKQpwYXJ0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwKQpwYXJ0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDIwMCwgMjU1KQpwYXJ0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjMKcGFydC5Cb3JkZXJTaXplUGl4ZWwgPSAwCnBhcnQuWkluZGV4ID0gMgpwYXJ0LlBhcmVudCA9IFBhcnRpY2xlQ2FudmFzCgpsb2NhbCBpbmZvID0gVHdlZW5JbmZvLm5ldygxLjIsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpCmxvY2FsIGdvYWwgPSB7ClBvc2l0aW9uID0gcGFydC5Qb3NpdGlvbiArIFVEaW0yLm5ldygwLCAwLCAxLjEsIDApLApCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQp9CmxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShwYXJ0LCBpbmZvLCBnb2FsKQp0d2VlbjpQbGF5KCkKdHdlZW4uQ29tcGxldGVkOkNvbm5lY3QoZnVuY3Rpb24oKQpwYXJ0OkRlc3Ryb3koKQplbmQpCgplbmQKbG9jYWwgZnVuY3Rpb24gY3JpYXJQYXJ0aWN1bGFNYXRyaXgoKQpsb2NhbCBwYXJ0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQpwYXJ0LlNpemUgPSBVRGltMi5uZXcoMCwgMTIsIDAsIDE4KQpwYXJ0LlBvc2l0aW9uID0gVURpbTIubmV3KG1hdGgucmFuZG9tKCksIDAsIC0wLjA1LCAwKQpwYXJ0LkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwKQpwYXJ0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCnBhcnQuQm9yZGVyU2l6ZVBpeGVsID0gMApwYXJ0LlpJbmRleCA9IDIKcGFydC5UZXh0ID0gdG9zdHJpbmcobWF0aC5yYW5kb20oMCwgOSkpCnBhcnQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDI1NSwgMCkKcGFydC5UZXh0U2l6ZSA9IDE0CnBhcnQuRm9udCA9IEVudW0uRm9udC5Db2RlCnBhcnQuUGFyZW50ID0gUGFydGljbGVDYW52YXMKCmxvY2FsIGluZm8gPSBUd2VlbkluZm8ubmV3KDEuMiwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIsIEVudW0uRWFzaW5nRGlyZWN0aW9uLkluKQpsb2NhbCBnb2FsID0gewpQb3NpdGlvbiA9IHBhcnQuUG9zaXRpb24gKyBVRGltMi5uZXcoMCwgMCwgMS4yLCAwKSwKVGV4dFRyYW5zcGFyZW5jeSA9IDEKfQoKbG9jYWwgdHdlZW4gPSBUd2VlblNlcnZpY2U6Q3JlYXRlKHBhcnQsIGluZm8sIGdvYWwpCnR3ZWVuOlBsYXkoKQp0d2Vlbi5Db21wbGV0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCnBhcnQ6RGVzdHJveSgpCmVuZCkKCmVuZAoKbG9jYWwgbmFub3BvaW50cyA9IHt9Cgpsb2NhbCBmdW5jdGlvbiBjcmlhclBhcnRpY3VsYU5hbm8oKQogICAgbG9jYWwgcG9udG8gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHBvbnRvLlNpemUgPSBVRGltMi5uZXcoMCwgMywgMCwgMykKICAgIHBvbnRvLlBvc2l0aW9uID0gVURpbTIubmV3KG1hdGgucmFuZG9tKCksIDAsIG1hdGgucmFuZG9tKCksIDApCiAgICBwb250by5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQogICAgcG9udG8uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEwMCwgMjU1LCAyNTUpCiAgICBwb250by5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4yCiAgICBwb250by5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBwb250by5aSW5kZXggPSAyCiAgICBwb250by5QYXJlbnQgPSBQYXJ0aWNsZUNhbnZhcyAgLS0gb25kZSBhcyBwYXJ0w61jdWxhcyBzw6NvIHJlbmRlcml6YWRhcwoKICAgIHRhYmxlLmluc2VydChuYW5vcG9pbnRzLCBwb250bykKCiAgICAtLSBNb3ZpbWVudG8gc3V0aWwgZSBkZXNhcGFyZWNpbWVudG8KICAgIGxvY2FsIGRlc3Rpbm8gPSBwb250by5Qb3NpdGlvbiArIFVEaW0yLm5ldyhtYXRoLnJhbmRvbSgtNSw1KS8zMDAsIDAsIG1hdGgucmFuZG9tKC01LDUpLzMwMCwgMCkKICAgIGxvY2FsIHR3ZWVuID0gVHdlZW5TZXJ2aWNlOkNyZWF0ZShwb250bywgVHdlZW5JbmZvLm5ldygxLjUsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwgewogICAgICAgIFBvc2l0aW9uID0gZGVzdGlubywKICAgICAgICBCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgfSkKCiAgICB0d2VlbjpQbGF5KCkKICAgIHR3ZWVuLkNvbXBsZXRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBmb3IgaSwgcCBpbiBpcGFpcnMobmFub3BvaW50cykgZG8KICAgICAgICAgICAgaWYgcCA9PSBwb250byB0aGVuCiAgICAgICAgICAgICAgICB0YWJsZS5yZW1vdmUobmFub3BvaW50cywgaSkKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHBvbnRvOkRlc3Ryb3koKQogICAgZW5kKQoKICAgIC0tIENvbmV4w7VlcyB2aXN1YWlzIGVudHJlIHBhcnTDrWN1bGFzIHByw7N4aW1hcwogICAgZm9yIF8sIG91dHJvIGluIGlwYWlycyhuYW5vcG9pbnRzKSBkbwogICAgICAgIGlmIG91dHJvIH49IHBvbnRvIGFuZCAocG9udG8uUG9zaXRpb24gLSBvdXRyby5Qb3NpdGlvbikuTWFnbml0dWRlIDwgMC4wNSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGxpbmhhID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgICAgIGxpbmhhLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAyNTUsIDI1NSkKICAgICAgICAgICAgbGluaGEuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgICBsaW5oYS5BbmNob3JQb2ludCA9IFZlY3RvcjIubmV3KDAuNSwgMC41KQogICAgICAgICAgICBsaW5oYS5aSW5kZXggPSAxCiAgICAgICAgICAgIGxpbmhhLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjcKICAgICAgICAgICAgbGluaGEuUGFyZW50ID0gUGFydGljbGVDYW52YXMKCiAgICAgICAgICAgIC0tIGNhbGN1bGFyIHRhbWFuaG8gZSByb3Rhw6fDo28gZGEgbGluaGEKICAgICAgICAgICAgbG9jYWwgcDEgPSBwb250by5BYnNvbHV0ZVBvc2l0aW9uCiAgICAgICAgICAgIGxvY2FsIHAyID0gb3V0cm8uQWJzb2x1dGVQb3NpdGlvbgogICAgICAgICAgICBsb2NhbCBkaXN0YW5jaWEgPSAocDEgLSBwMikuTWFnbml0dWRlCiAgICAgICAgICAgIGxpbmhhLlNpemUgPSBVRGltMi5uZXcoMCwgZGlzdGFuY2lhLCAwLCAxKQogICAgICAgICAgICBsaW5oYS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAocDEuWCArIHAyLlgpIC8gMiwgMCwgKHAxLlkgKyBwMi5ZKSAvIDIpCgogICAgICAgICAgICBsb2NhbCBhbmd1bG8gPSBtYXRoLmF0YW4yKHAyLlkgLSBwMS5ZLCBwMi5YIC0gcDEuWCkKICAgICAgICAgICAgbGluaGEuUm90YXRpb24gPSBtYXRoLmRlZyhhbmd1bG8pCgogICAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGxpbmhhLCBUd2VlbkluZm8ubmV3KDEuNSksIHtCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMX0pOlBsYXkoKQogICAgICAgICAgICB0YXNrLmRlbGF5KDEuNSwgZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbGluaGE6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tIExvb3AgZGUgcGFydMOtY3VsYXMKbG9jYWwgZnVuY29lc1BhcnRpY3VsYXMgPSB7CmNyaWFyUGFydGljdWxhRm9nbyA9IGNyaWFyUGFydGljdWxhRm9nbywKY3JpYXJQYXJ0aWN1bGFOZW9uID0gY3JpYXJQYXJ0aWN1bGFOZW9uLApjcmlhclBhcnRpY3VsYUNodXZhID0gY3JpYXJQYXJ0aWN1bGFDaHV2YSwKY3JpYXJQYXJ0aWN1bGFNYXRyaXggPSBjcmlhclBhcnRpY3VsYU1hdHJpeCwKY3JpYXJQYXJ0aWN1bGFOYW5vID0gY3JpYXJQYXJ0aWN1bGFOYW5vCn0KClJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKZm9yIGkgPSAxLCAzIGRvCmxvY2FsIGZ1bmMgPSBmdW5jb2VzUGFydGljdWxhc1t0aXBvQXR1YWxdCmlmIGZ1bmMgdGhlbgpmdW5jKCkKZW5kCmVuZAplbmQpCi0tIEludGVyZmFjZSBkZSBTZWxlw6fDo28gZGUgUGFydMOtY3VsYXMgKGluZGVwZW5kZW50ZSBkbyBzY3JpcHQgcHJpbmNpcGFsKQpkbwpsb2NhbCBlZmVpdG9zID0gewpbIkNodXZhIl0gPSBmdW5jdGlvbigpIHRpcG9BdHVhbCA9ICJjcmlhclBhcnRpY3VsYUNodXZhIiBlbmQsClsiRm9nbyJdID0gZnVuY3Rpb24oKSB0aXBvQXR1YWwgPSAiY3JpYXJQYXJ0aWN1bGFGb2dvIiBlbmQsClsiTmVvbiJdID0gZnVuY3Rpb24oKSB0aXBvQXR1YWwgPSAiY3JpYXJQYXJ0aWN1bGFOZW9uIiBlbmQsClsiU2VtIFBhcnTDrWN1bGEiXSA9IGZ1bmN0aW9uKCkgdGlwb0F0dWFsID0gIm5vbmUiIGVuZCwKWyJNYXRyaXgiXSA9IGZ1bmN0aW9uKCkgdGlwb0F0dWFsID0gImNyaWFyUGFydGljdWxhTWF0cml4IiBlbmQsClsiTmFub3BhcnTDrWN1bGFzIl0gPSBmdW5jdGlvbigpIHRpcG9BdHVhbCA9ICJjcmlhclBhcnRpY3VsYU5hbm8iIGVuZCwKfQoKLS0gQ3JpYXIgbyBHVUkgc2UgbsOjbyBleGlzdGlyCmxvY2FsIHNjcmVlbkd1aSA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyOkZpbmRGaXJzdENoaWxkKCJQbGF5ZXJHdWkiKTpGaW5kRmlyc3RDaGlsZCgiUGFydGljdWxhR3VpIikKb3IgSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiLCBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIpKQpzY3JlZW5HdWkuTmFtZSA9ICJQYXJ0aWN1bGFHdWkiCnNjcmVlbkd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQoKLS0gRnVuw6fDo28gZGUgZXN0aWxvCmxvY2FsIGZ1bmN0aW9uIGFwbGljYXJFc3RpbG8odWksIGNvciwgcmFpbykKbG9jYWwgdWlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKdWlDb3JuZXIuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgcmFpbyBvciA2KQp1aUNvcm5lci5QYXJlbnQgPSB1aQoKbG9jYWwgc3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpICAgIApzdHJva2UuVGhpY2tuZXNzID0gMS4yICAgIApzdHJva2UuQ29sb3IgPSBjb3Igb3IgQ29sb3IzLmZyb21SR0IoNzAsIDcwLCA3MCkgICAgCnN0cm9rZS5QYXJlbnQgPSB1aQoKZW5kCgotLSBKYW5lbGEgcHJpbmNpcGFsCmxvY2FsIGZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCmZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMTgwLCAwLCA0MCkKZnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAxMjApCmZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNSwgMjUsIDI1KQpmcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCmZyYW1lLkFjdGl2ZSA9IHRydWUKZnJhbWUuRHJhZ2dhYmxlID0gdHJ1ZQpmcmFtZS5QYXJlbnQgPSBzY3JlZW5HdWkKYXBsaWNhckVzdGlsbyhmcmFtZSkKCi0tIEJvdMOjbyBkZSBtaW5pbWl6YXIKbG9jYWwgdG9nZ2xlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKdG9nZ2xlLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNDApCnRvZ2dsZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDAsIDQwLCA0MCkKdG9nZ2xlLlRleHQgPSAiU2VsZWNpb25hciBBbmltYcOnw6NvIOKWvCIKdG9nZ2xlLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCnRvZ2dsZS5UZXh0U2l6ZSA9IDE0CnRvZ2dsZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbUJvbGQKdG9nZ2xlLlBhcmVudCA9IGZyYW1lCmFwbGljYXJFc3RpbG8odG9nZ2xlLCBDb2xvcjMuZnJvbVJHQig2MCwgNjAsIDYwKSwgNikKCi0tIMOBcmVhIGNvbSByb2xhZ2VtCmxvY2FsIHNjcm9sbCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQpzY3JvbGwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgNDApCnNjcm9sbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDApCnNjcm9sbC5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCnNjcm9sbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpzY3JvbGwuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNApzY3JvbGwuQm9yZGVyU2l6ZVBpeGVsID0gMApzY3JvbGwuVmlzaWJsZSA9IGZhbHNlCnNjcm9sbC5QYXJlbnQgPSBmcmFtZQoKLS0gTGF5b3V0IGRhIGxpc3RhCmxvY2FsIGxheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKbGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA0KQpsYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKbGF5b3V0LlBhcmVudCA9IHNjcm9sbAoKbG9jYWwgYWJlcnRhID0gZmFsc2UKbG9jYWwgZnVuY3Rpb24gYXR1YWxpemFyTGlzdGEoKQphYmVydGEgPSBub3QgYWJlcnRhCnNjcm9sbC5WaXNpYmxlID0gYWJlcnRhCnRvZ2dsZS5UZXh0ID0gYWJlcnRhIGFuZCAiU2VsZWNpb25hciBBbmltYcOnw6NvIOKWsiIgb3IgIlNlbGVjaW9uYXIgQW5pbWHDp8OjbyDilrwiCgppZiBhYmVydGEgdGhlbiAgICAKICAgIHRhc2sud2FpdCgpIC0tIEdhcmFudGUgcXVlIGxheW91dC5BYnNvbHV0ZUNvbnRlbnRTaXplIGVzdGVqYSBhdHVhbGl6YWRvICAgIAogICAgc2Nyb2xsLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgbGF5b3V0LkFic29sdXRlQ29udGVudFNpemUuWSArIDEwKSAgICAKICAgIHNjcm9sbC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIG1hdGgubWluKGxheW91dC5BYnNvbHV0ZUNvbnRlbnRTaXplLlkgKyAxMCwgMTYwKSkgICAgCiAgICBmcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDE4MCwgMCwgc2Nyb2xsLlNpemUuWS5PZmZzZXQgKyA0MCkgICAgCmVsc2UgICAgCiAgICBmcmFtZS5TaXplID0gVURpbTIubmV3KDAsIDE4MCwgMCwgNDApICAgIAplbmQKCmVuZAoKdG9nZ2xlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoYXR1YWxpemFyTGlzdGEpCgotLSBDcmlhciBvcyBib3TDtWVzIGNvbSBiYXNlIG5vcyBlZmVpdG9zCmZvciBub21lLCBmdW5jYW8gaW4gcGFpcnMoZWZlaXRvcykgZG8KbG9jYWwgYnRuID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYnRuLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAzMCkKYnRuLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQpidG4uVGV4dCA9IG5vbWUKYnRuLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCmJ0bi5Gb250ID0gRW51bS5Gb250LkdvdGhhbQpidG4uVGV4dFNpemUgPSAxMwpidG4uUGFyZW50ID0gc2Nyb2xsCmFwbGljYXJFc3RpbG8oYnRuLCBDb2xvcjMuZnJvbVJHQig4MCwgODAsIDgwKSwgNCkKCmJ0bi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgICAgCiAgICBmdW5jYW8oKSAgICAKICAgIGF0dWFsaXphckxpc3RhKCkgICAgCmVuZCkKCmVuZAoKZW5kCgotLQotLS0tLS0tLS0tLS0tLS0tLS0tLUZJTQoKCi0tIFBhaW5lbCBlc3F1ZXJkbyAKbG9jYWwgbGVmdFBhbmVsID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCmxlZnRQYW5lbC5OYW1lID0gImxlZnRQYW5lbCIKbGVmdFBhbmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAxLCAtMzApCmxlZnRQYW5lbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAzNSkKbGVmdFBhbmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNSwgMzUsIDM1KQpsZWZ0UGFuZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKbGVmdFBhbmVsLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgNTAwKSAtLSBBanVzdGUgYSBhbHR1cmEgY29uZm9ybWUgbmVjZXNzw6FyaW8KbGVmdFBhbmVsLlNjcm9sbEJhclRoaWNrbmVzcyA9IDYKbGVmdFBhbmVsLlNjcm9sbEJhckltYWdlQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMSwgMSwgMSkKbGVmdFBhbmVsLlBhcmVudCA9IG1haW5GcmFtZQoKLS0gTGF5b3V0IHBhcmEgb3JnYW5pemFyIG9zIGJvdMO1ZXMgZGUgY2F0ZWdvcmlhcyBjb20gZXNwYcOnYW1lbnRvCmxvY2FsIGxlZnRMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCmxlZnRMYXlvdXQuUGFyZW50ID0gbGVmdFBhbmVsCmxlZnRMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKbGVmdExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgNSkgIC0tIGVzcGHDp2FtZW50byBkZSA1IHBpeGVscwoKLS0gUGFpbmVsIERpcmVpdG8gcGFyYSBBw6fDtWVzCmxvY2FsIHJpZ2h0UGFuZWwgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKcmlnaHRQYW5lbC5OYW1lID0gInJpZ2h0UGFuZWwiCnJpZ2h0UGFuZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAwLCAxLCAtMzApCnJpZ2h0UGFuZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAzNSkKcmlnaHRQYW5lbC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDUsIDQ1LCA0NSkKcmlnaHRQYW5lbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQpyaWdodFBhbmVsLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgNTAwKSAtLSBBbHR1cmEgdmlydHVhbApyaWdodFBhbmVsLlNjcm9sbEJhclRoaWNrbmVzcyA9IDYKcmlnaHRQYW5lbC5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDEsIDEsIDEpCnJpZ2h0UGFuZWwuUGFyZW50ID0gbWFpbkZyYW1lCgotLSBMYXlvdXQgcGFyYSBvcmdhbml6YXIgb3MgYm90w7VlcyBkZSBhw6fDtWVzIGNvbSBlc3Bhw6dhbWVudG8KbG9jYWwgcmlnaHRMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCnJpZ2h0TGF5b3V0LlBhcmVudCA9IHJpZ2h0UGFuZWwKcmlnaHRMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKcmlnaHRMYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDUpCgotLSBQYWluZWwgRXh0cmEgw6AgRGlyZWl0YQotLSBQYWluZWwgRXh0cmEgw6AgRGlyZWl0YSAoaW52aXPDrXZlbCBpbmljaWFsbWVudGUpCmxvY2FsIGV4dHJhUGFuZWwgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKZXh0cmFQYW5lbC5OYW1lID0gImV4dHJhUGFuZWwiCmV4dHJhUGFuZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNjAsIDEsIDApCmV4dHJhUGFuZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgMTAsIDAsIDApCmV4dHJhUGFuZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM1LCAzNSwgMzUpCmV4dHJhUGFuZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEgLS0gPC0gdG90YWwgdHJhbnNwYXLDqm5jaWEgYXTDqSBzZXIgYXRpdmFkbwpleHRyYVBhbmVsLkJvcmRlclNpemVQaXhlbCA9IDAKZXh0cmFQYW5lbC5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCmV4dHJhUGFuZWwuU2Nyb2xsQmFyVGhpY2tuZXNzID0gNgpleHRyYVBhbmVsLlZpc2libGUgPSBmYWxzZSAtLSA8LSBJTVBPUlRBTlRFOiBjb21lw6dhIG9jdWx0bwpleHRyYVBhbmVsLlBhcmVudCA9IG1haW5GcmFtZQoKbG9jYWwgY29ybmVyRXh0cmEgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKY29ybmVyRXh0cmEuQ29ybmVyUmFkaXVzID0gVURpbS5uZXcoMCwgMTApCmNvcm5lckV4dHJhLlBhcmVudCA9IGV4dHJhUGFuZWwKCmxvY2FsIHNsaWRlckxheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKc2xpZGVyTGF5b3V0LlBhcmVudCA9IGV4dHJhUGFuZWwKc2xpZGVyTGF5b3V0LlBhZGRpbmcgPSBVRGltLm5ldygwLCA4KQpzbGlkZXJMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKCgotLS0tLS0tLS0tLS0tLS0tLQotLSBDUklBw4fDg08gRE9TIEJPVMOVRVMKbG9jYWwgZnVuY3Rpb24gY3JlYXRlQnV0dG9uKHBhcmVudCwgdGV4dCwgb25DbGljaykKbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKYnV0dG9uLlRleHQgPSB0ZXh0CmJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAwKSAtLSA8PCBBZGljaW9uZSBlc3RhIGxpbmhhCmJ1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMzApCmJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCAzMCkKYnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQpidXR0b24uRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCmJ1dHRvbi5UZXh0U2l6ZSA9IDE0CmJ1dHRvbi5QYXJlbnQgPSBwYXJlbnQKbG9jYWwgY29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA4KQpjb3JuZXIuUGFyZW50ID0gYnV0dG9uCmJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KG9uQ2xpY2spCnJldHVybiBidXR0b24KZW5kCgoKbG9jYWwgZnVuY3Rpb24gY3JlYXRlSG9sZEJ1dHRvbihwYXJlbnQsIHRleHQsIG9uSG9sZFN0YXJ0LCBvbkhvbGRTdG9wKQogICAgbG9jYWwgYnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgIGJ1dHRvbi5UZXh0ID0gdGV4dAogICAgYnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDApIC0tIDw8IEFkaWNpb25lIGVzdGEgbGluaGEKICAgIGJ1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMzApCiAgICBidXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgMzApCiAgICBidXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBidXR0b24uRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICBidXR0b24uVGV4dFNpemUgPSAxNAoJbG9jYWwgY29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCmNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA4KQpjb3JuZXIuUGFyZW50ID0gYnV0dG9uCiAgICBidXR0b24uUGFyZW50ID0gcGFyZW50CgogICAgYnV0dG9uLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChvbkhvbGRTdGFydCkKICAgIGJ1dHRvbi5Nb3VzZUJ1dHRvbjFVcDpDb25uZWN0KG9uSG9sZFN0b3ApCgogICAgcmV0dXJuIGJ1dHRvbgplbmQKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBleHRyYVBhbmVsIGNvbSBVSUxpc3RMYXlvdXQKCmxvY2FsIHVpcyA9IGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpCmxvY2FsIHJzID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikKCmxvY2FsIGZ1bmN0aW9uIGNyaWFyTm92b1NsaWRlcih0aXR1bG8sIG1pbiwgbWF4LCBhb0FsdGVyYXIpCiAgICAtLSBWZXJpZmljYSBzZSBqw6EgZXhpc3RlIHVtIHNsaWRlciBjb20gZXN0ZSB0w610dWxvCmZvciBfLCBmcmFtZSBpbiBwYWlycyhleHRyYVBhbmVsOkdldENoaWxkcmVuKCkpIGRvCiAgICBpZiBmcmFtZTpJc0EoIkZyYW1lIikgdGhlbgogICAgICAgIGxvY2FsIGxhYmVsID0gZnJhbWU6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUZXh0TGFiZWwiKQogICAgICAgIGlmIGxhYmVsIGFuZCBsYWJlbC5UZXh0ID09IHRpdHVsbyB0aGVuCiAgICAgICAgICAgIHJldHVybiAtLSBKw6EgZXhpc3RlLCBlbnTDo28gbsOjbyBjcmlhIG5vdmFtZW50ZQogICAgICAgIGVuZAogICAgZW5kCmVuZAogICAgbG9jYWwgc2xpZGVyRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgIHNsaWRlckZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCA2MCkKICAgIHNsaWRlckZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzMCwgMzAsIDMwKQogICAgc2xpZGVyRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgc2xpZGVyRnJhbWUuUGFyZW50ID0gZXh0cmFQYW5lbAoKICAgIGxvY2FsIGNvcm5lciA9IEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKQogICAgY29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDgpCiAgICBjb3JuZXIuUGFyZW50ID0gc2xpZGVyRnJhbWUKCiAgICBsb2NhbCB0aXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIHRpdGxlLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyMCkKICAgIHRpdGxlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDUpCiAgICB0aXRsZS5UZXh0ID0gdGl0dWxvCiAgICB0aXRsZS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgdGl0bGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIHRpdGxlLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQKICAgIHRpdGxlLlRleHRTaXplID0gMTQKICAgIHRpdGxlLlBhcmVudCA9IHNsaWRlckZyYW1lCgogICAgbG9jYWwgc2xpZGVyQmFyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICBzbGlkZXJCYXIuU2l6ZSA9IFVEaW0yLm5ldygxLCAtNDAsIDAsIDQpCiAgICBzbGlkZXJCYXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAsIDAsIDM1KQogICAgc2xpZGVyQmFyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig4MCwgODAsIDgwKQogICAgc2xpZGVyQmFyLlBhcmVudCA9IHNsaWRlckZyYW1lCgogICAgbG9jYWwgdmFsdWVCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgdmFsdWVCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLCA2MCwgMCwgMjApCiAgICB2YWx1ZUJ1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjUpCiAgICB2YWx1ZUJ1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjAsIDIwLCAyMCkKICAgIHZhbHVlQnV0dG9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICB2YWx1ZUJ1dHRvbi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkCiAgICB2YWx1ZUJ1dHRvbi5UZXh0U2l6ZSA9IDE0CiAgICB2YWx1ZUJ1dHRvbi5UZXh0ID0gdG9zdHJpbmcobWluKQogICAgdmFsdWVCdXR0b24uUGFyZW50ID0gc2xpZGVyRnJhbWUKCiAgICBsb2NhbCBidG5Db3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIGJ0bkNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLCA2KQogICAgYnRuQ29ybmVyLlBhcmVudCA9IHZhbHVlQnV0dG9uCgogICAgbG9jYWwgZHJhZ2dpbmcgPSBmYWxzZQogICAgbG9jYWwgaW5zaWRlQnV0dG9uID0gZmFsc2UKICAgIGxvY2FsIGNvbm5lY3Rpb24KCiAgICB2YWx1ZUJ1dHRvbi5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGluc2lkZUJ1dHRvbiA9IHRydWUKICAgIGVuZCkKCiAgICB2YWx1ZUJ1dHRvbi5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGluc2lkZUJ1dHRvbiA9IGZhbHNlCiAgICBlbmQpCgogICAgdmFsdWVCdXR0b24uTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBkcmFnZ2luZyA9IHRydWUKICAgICAgICBjb25uZWN0aW9uID0gcnMuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgZHJhZ2dpbmcgYW5kIGluc2lkZUJ1dHRvbiB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBtb3VzZVggPSB1aXM6R2V0TW91c2VMb2NhdGlvbigpLlgKICAgICAgICAgICAgICAgIGxvY2FsIGJhckFic1BvcyA9IHNsaWRlckJhci5BYnNvbHV0ZVBvc2l0aW9uLlgKICAgICAgICAgICAgICAgIGxvY2FsIGJhcldpZHRoID0gc2xpZGVyQmFyLkFic29sdXRlU2l6ZS5YCiAgICAgICAgICAgICAgICBsb2NhbCByZWxYID0gbWF0aC5jbGFtcChtb3VzZVggLSBiYXJBYnNQb3MsIDAsIGJhcldpZHRoKQoKICAgICAgICAgICAgICAgIHZhbHVlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIHNsaWRlckJhci5Qb3NpdGlvbi5YLk9mZnNldCArIHJlbFggLSB2YWx1ZUJ1dHRvbi5BYnNvbHV0ZVNpemUuWCAvIDIsIDAsIDI1KQoKICAgICAgICAgICAgICAgIGxvY2FsIHBlcmNlbnQgPSByZWxYIC8gYmFyV2lkdGgKICAgICAgICAgICAgICAgIGxvY2FsIHZhbHVlID0gbWF0aC5mbG9vcihtaW4gKyAobWF4IC0gbWluKSAqIHBlcmNlbnQpCiAgICAgICAgICAgICAgICB2YWx1ZUJ1dHRvbi5UZXh0ID0gdG9zdHJpbmcodmFsdWUpCgogICAgICAgICAgICAgICAgaWYgYW9BbHRlcmFyIHRoZW4KICAgICAgICAgICAgICAgICAgICBhb0FsdGVyYXIodmFsdWUpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZW5kKQoKICAgIHVpcy5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4KICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZQogICAgICAgICAgICBpZiBjb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgICAgIGNvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICBjb25uZWN0aW9uID0gbmlsCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZW5kKQplbmQKCgoKbG9jYWwgaXNKdW1wSW5jcmVhc2VkID0gZmFsc2UgLS0gVmFyacOhdmVsIHBhcmEgY29udHJvbGFyIG8gZXN0YWRvIGRvIHB1bG8KCi0tIHBlcm1pdGUgcXVlIG8gam9nYWRvciBwdWxlIG5vIGFyCmxvY2FsIGp1bXBlZCA9IGZhbHNlIC0tIFZhcmnDoXZlbCBwYXJhIGRldGVjdGFyIG8gcHVsbwoKbG9jYWwgYWxsb3dBaXJKdW1wID0gZmFsc2UgLS0gQ29udHJvbGEgc2UgbyBqb2dhZG9yIHBvZGUgcHVsYXIgbm8gYXIKCmxvY2FsIGFudEFGS0VuYWJsZWQgPSBmYWxzZQoKCmxvY2FsIGZvZ0VuYWJsZWQgPSB0cnVlICAtLSBFc3RhZG8gZG8gZm9nCmxvY2FsIGZvZ1N0YXJ0ID0gMApsb2NhbCBmb2dFbmQgPSAxMDAwCmxvY2FsIGZvZ1N0YXJ0Q29ubmVjdGlvbiwgZm9nRW5kQ29ubmVjdGlvbiAgLS0gQ29uZXjDtWVzIHBhcmEgY29uZ2VsYXIgdmFsb3JlcwoKCgpsb2NhbCB0ZWxlcG9ydEVuYWJsZWQgPSAwICAtLSBDb250cm9sYSBvIGVzdGFkbyBkbyBib3TDo28gKDAgPSBhcGVuYXMgZGVzZW5oYXIsIDEgPSB0ZWxlcG9ydGFyIGUgc2VndWlyLCAyID0gcGFyYXIgZGUgc2VndWlyKQpsb2NhbCBsaW5lID0gbmlsICAtLSBBcm1hemVuYSBhIGxpbmhhIGdsb2JhbG1lbnRlICAtLSBBcm1hemVuYSBhIGNvbmV4w6NvIGdsb2JhbG1lbnRlCmxvY2FsIGZvbGxvd0Nvbm5lY3Rpb24gPSBuaWwgIC0tIENvbmV4w6NvIGRlIHNlZ3VpbWVudG8gcGFyYSBhdHVhbGl6YXIgYSBwb3Npw6fDo28KbG9jYWwgZm9sbG93UGxheWVyID0gbmlsICAtLSBBcm1hemVuYSBvIGpvZ2Fkb3IgcXVlIGVzdMOhIHNlbmRvIHNlZ3VpZG8KbG9jYWwgZnJlZXplT2Zmc2V0ID0gVmVjdG9yMy5uZXcoMCwgIDMsIDApICAtLSBEZWZpbmUgbyAiY29uZ2VsYW1lbnRvIiBkYSBwb3Npw6fDo28gY29tIHVtYSBkaXN0w6JuY2lhIGZpeGEgZG8gam9nYWRvcgpsb2NhbCBsYWdQcm90ZWN0aW9uRW5hYmxlZCA9IGZhbHNlIC0tIFZhcmnDoXZlbCBkZSBjb250cm9sZQpsb2NhbCB0ZWxlcG9ydEVuYWJsZWQgPSBmYWxzZSAgLS0gQ29udHJvbGEgbyBlc3RhZG8gZG8gYm90w6NvCgpsb2NhbCBjYXRlZ29yaWVzID0gewoJCiAgICBbIlBsYXllciJdID0gewogICAgCQp7bmFtZSA9ICJTcGVlZCIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBleHRyYVBhbmVsLlZpc2libGUgPSB0cnVlCiAgICBleHRyYVBhbmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCgogICAgY3JpYXJOb3ZvU2xpZGVyKCJWZWxvY2lkYWRlIiwgNSwgMTAwLCBmdW5jdGlvbih2KQogICAgICAgIGxvY2FsIGh1bSA9IHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgaWYgaHVtIHRoZW4gaHVtLldhbGtTcGVlZCA9IHYgZW5kCiAgICBlbmQpCmVuZH0sCgogICAgICAgIHtuYW1lID0gIkluZiBqdW1wIiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgYWxsb3dBaXJKdW1wID0gbm90IGFsbG93QWlySnVtcCAtLSBBbHRlcm5hIG8gZXN0YWRvCiAgICAgICAgICAgIHByaW50KCJQdWxvIG5vIGFyICIgLi4gKGFsbG93QWlySnVtcCBhbmQgImF0aXZhZG8iIG9yICJkZXNhdGl2YWRvIikpCiAgICAgICAgZW5kfSwKCntuYW1lID0gIlN1cGVyIEp1bXAiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgZXh0cmFQYW5lbC5WaXNpYmxlID0gdHJ1ZQogICAgZXh0cmFQYW5lbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAoKICAgIGNyaWFyTm92b1NsaWRlcigiU3VwZXIgUHVsbyIsIDEsIDEwMDAsIGZ1bmN0aW9uKHYpCiAgICAgICAgbG9jYWwgaHVtID0gcGxheWVyLkNoYXJhY3RlciBhbmQgcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBpZiBodW0gdGhlbiBodW0uSnVtcFBvd2VyID0gdiBlbmQKICAgIGVuZCkKZW5kfSwKICAgICAgICAKCgotLSBGdW7Dp8OjbyBkbyBib3TDo28gZGUgdm9vCntuYW1lID0gIkZseSIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBsb2NhbCBjaGFyYWN0ZXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCByb290UGFydCA9IGNoYXJhY3RlciBhbmQgY2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICAgIAogICAgaWYgbm90IHJvb3RQYXJ0IHRoZW4gCiAgICAgICAgcHJpbnQoIkh1bWFub2lkUm9vdFBhcnQgbsOjbyBlbmNvbnRyYWRvIikKICAgICAgICByZXR1cm4gCiAgICBlbmQKCiAgICAtLSBDcmlhIHVtYSBTY3JlZW5HdWkgZXhjbHVzaXZhIHBhcmEgb3MgY29udHJvbGVzIGRlIEZseQogICAgbG9jYWwgZmx5U2NyZWVuR3VpID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgZmx5U2NyZWVuR3VpLlBhcmVudCA9IGdhbWUuQ29yZUd1aQoKICAgIC0tIENyaWEgYSBqYW5lbGEgZG8gRmx5CiAgICBsb2NhbCBmbHlXaW5kb3cgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIiwgZmx5U2NyZWVuR3VpKQogICAgZmx5V2luZG93LlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCAzMDApCiAgICBmbHlXaW5kb3cuUG9zaXRpb24gPSBVRGltMi5uZXcoMC44LCAwLCAwLjIsIDApCiAgICBmbHlXaW5kb3cuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDIwLCAyMCwgMjApCiAgICBmbHlXaW5kb3cuQWN0aXZlID0gdHJ1ZQogICAgZmx5V2luZG93LkRyYWdnYWJsZSA9IHRydWUKCiAgICAtLSBUw610dWxvIGRhIGphbmVsYQogICAgbG9jYWwgdGl0bGVMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIiwgZmx5V2luZG93KQogICAgdGl0bGVMYWJlbC5UZXh0ID0gIkZseSBDb250cm9scyIKICAgIHRpdGxlTGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLCAzMCkKICAgIHRpdGxlTGFiZWwuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDMwLCAzMCwgMzApCiAgICB0aXRsZUxhYmVsLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgdGl0bGVMYWJlbC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNCb2xkCiAgICB0aXRsZUxhYmVsLlRleHRTaXplID0gMTgKCiAgICAtLSBDb250YWluZXIgcGFyYSBvcyBib3TDtWVzLCBwb3NpY2lvbmFkbyBhYmFpeG8gZG8gdMOtdHVsbwogICAgbG9jYWwgYnV0dG9uQ29udGFpbmVyID0gSW5zdGFuY2UubmV3KCJGcmFtZSIsIGZseVdpbmRvdykKICAgIGJ1dHRvbkNvbnRhaW5lci5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIC0zMCkKICAgIGJ1dHRvbkNvbnRhaW5lci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAzMCkKICAgIGJ1dHRvbkNvbnRhaW5lci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQoKICAgIGxvY2FsIGxheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IiwgYnV0dG9uQ29udGFpbmVyKQogICAgbGF5b3V0LlNvcnRPcmRlciA9IEVudW0uU29ydE9yZGVyLkxheW91dE9yZGVyCiAgICBsYXlvdXQuUGFkZGluZyA9IFVEaW0ubmV3KDAsIDEwKQoKICAgIGxvY2FsIGZseWluZyA9IHRydWUKICAgIGxvY2FsIGZseVNwZWVkID0gNTAKICAgIGxvY2FsIG1vdmVtZW50ID0ge3VwID0gMCwgZm9yd2FyZCA9IDB9CiAgICBsb2NhbCBmbHlDb25uZWN0aW9uCgpmbHlDb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGlmIGZseWluZyB0aGVuCiAgICAgICAgICAgIGxvY2FsIGNhbWVyYSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCiAgICAgICAgICAgIGxvY2FsIGRpcmVjdGlvbiA9IGNhbWVyYS5DRnJhbWUuTG9va1ZlY3RvciAqIG1vdmVtZW50LmZvcndhcmQKICAgICAgICAgICAgbG9jYWwgdmVydGljYWwgPSBWZWN0b3IzLm5ldygwLCBtb3ZlbWVudC51cCwgMCkKICAgICAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSAoZGlyZWN0aW9uICsgdmVydGljYWwpICogZmx5U3BlZWQKICAgICAgICBlbmQKICAgIGVuZCkKCiAgICAtLSBCb3TDtWVzIGRlIGNsaXF1ZSBjb250w61udW8gKGhvbGQpIHBhcmEgY29udHJvbGFyIG8gbW92aW1lbnRvCiAgICBjcmVhdGVIb2xkQnV0dG9uKGJ1dHRvbkNvbnRhaW5lciwgIitZIChnbyB1cCkiLCAKICAgICAgICBmdW5jdGlvbigpIG1vdmVtZW50LnVwID0gMyBlbmQsIAogICAgICAgIGZ1bmN0aW9uKCkgbW92ZW1lbnQudXAgPSAwIGVuZAogICAgKQogICAgY3JlYXRlSG9sZEJ1dHRvbihidXR0b25Db250YWluZXIsICItWSAoZG93bikiLCAKICAgICAgICBmdW5jdGlvbigpIG1vdmVtZW50LnVwID0gLTMgZW5kLCAKICAgICAgICBmdW5jdGlvbigpIG1vdmVtZW50LnVwID0gMCBlbmQKICAgICkKICAgIGNyZWF0ZUhvbGRCdXR0b24oYnV0dG9uQ29udGFpbmVyLCAiRm9yd2FyZCIsIAogICAgICAgIGZ1bmN0aW9uKCkgbW92ZW1lbnQuZm9yd2FyZCA9IDMgZW5kLCAKICAgICAgICBmdW5jdGlvbigpIG1vdmVtZW50LmZvcndhcmQgPSAwIGVuZAogICAgKQogICAgY3JlYXRlSG9sZEJ1dHRvbihidXR0b25Db250YWluZXIsICJCYWNrd2FyZCIsIAogICAgICAgIGZ1bmN0aW9uKCkgbW92ZW1lbnQuZm9yd2FyZCA9IC0zIGVuZCwgCiAgICAgICAgZnVuY3Rpb24oKSBtb3ZlbWVudC5mb3J3YXJkID0gMCBlbmQKICAgICkKCiAgICAtLSBCb3TDo28gcGFyYSBwYXJhciBvIEZseSBlIGZlY2hhciBhIGphbmVsYQogICAgY3JlYXRlQnV0dG9uKGJ1dHRvbkNvbnRhaW5lciwgIlN0b3AgRmx5IiwgZnVuY3Rpb24oKQogICAgICAgIGZseWluZyA9IGZhbHNlCiAgICAgICAgaWYgZmx5Q29ubmVjdGlvbiB0aGVuIAogICAgICAgICAgICBmbHlDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSAKICAgICAgICBlbmQKICAgICAgICBmbHlTY3JlZW5HdWk6RGVzdHJveSgpCiAgICAgICAgcm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgZW5kKQplbmR9LAoKLS0gVmFyacOhdmVsIHBhcmEgY29udHJvbGFyIG8gZXN0YWRvIGRvIGZseQoKCgp7bmFtZSA9ICJOb0NsaXAiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBvciBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpCgogICAgaWYgbm90IHJ1bm5pbmcgdGhlbgogICAgICAgIHJ1bm5pbmcgPSB0cnVlCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIHdoaWxlIHJ1bm5pbmcgZG8KICAgICAgICAgICAgICAgIGZvciBfLCBwYXJ0IGluIGlwYWlycyhjaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBwYXJ0OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIHRhc2sud2FpdCgwLjEpIC0tIHRlbXBvIGVudHJlIGNhZGEgdmVyaWZpY2HDp8OjbwogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICBlbHNlCiAgICAgICAgcnVubmluZyA9IGZhbHNlCiAgICAgICAgLS0gUmVzdGF1cmEgY29saXPDo28KICAgICAgICBmb3IgXywgcGFydCBpbiBpcGFpcnMoY2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHBhcnQ6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICAgICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IHRydWUKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgcHJpbnQoIkNvbGlzw6NvIGF0aXZhZGEiKQogICAgZW5kCmVuZH0sCiAgICAKICAgIHtuYW1lID0gIkFudC1BRksiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgCgotLSBGdW7Dp8OjbyBwYXJhIG1vc3RyYXIgYSBub3RpZmljYcOnw6NvCmxvY2FsIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obWVzc2FnZSkKICAgIGxvY2FsIG5vdGlmaWNhdGlvbiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIG5vdGlmaWNhdGlvbi5TaXplID0gVURpbTIubmV3KDAsIDMwMCwgMCwgNTApCiAgICBub3RpZmljYXRpb24uUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTUwLCAwLjEsIDApICAtLSBFeGliaWRvIG5hIHBhcnRlIHN1cGVyaW9yIGNlbnRyYWxpemFkYQogICAgbm90aWZpY2F0aW9uLlRleHQgPSBtZXNzYWdlCiAgICBub3RpZmljYXRpb24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgICBub3RpZmljYXRpb24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgICBub3RpZmljYXRpb24uVGV4dFNpemUgPSAyMAogICAgbm90aWZpY2F0aW9uLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwLjgKICAgIG5vdGlmaWNhdGlvbi5QYXJlbnQgPSBnYW1lLkNvcmVHdWkKCiAgICAtLSBSZW1vdmVyIGEgbm90aWZpY2HDp8OjbyBhcMOzcyAzIHNlZ3VuZG9zCiAgICB3YWl0KDMpCiAgICBub3RpZmljYXRpb246RGVzdHJveSgpCmVuZAoKLS0gRnVuw6fDo28gcGFyYSBtYW50ZXIgbyBqb2dhZG9yIGF0aXZvIGUgaW1wZWRpciBvIEFGSwpsb2NhbCBmdW5jdGlvbiBwcmV2ZW50QUZLKCkKICAgIHdoaWxlIGFudEFGS0VuYWJsZWQgZG8KICAgICAgICAtLSBNb3ZpbWVudGEgbyBqb2dhZG9yIHBhcmEgZXZpdGFyIHNlciBraWthZG8KICAgICAgICBwbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gcGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgMC4xKSAKICAgICAgICB3YWl0KDEwKSAgLS0gUmVwaXRlIGEgbW92aW1lbnRhw6fDo28gYSBjYWRhIDEwIHNlZ3VuZG9zCiAgICBlbmQKZW5kCmVuZH0sCiAgICB9LC0tIEZlY2hhbWVudG8gZGEgdGFiZWxhICJQbGF5ZXIiCiAgICAKICAgIFsiVmlzdWFsIl0gPSB7CgkJe25hbWUgPSAiQWltYm90IiwgZnVuYyA9IGZ1bmN0aW9uKCkKCQkJCWxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vSmhvbmE4NTI4MDQvU2NyaXB0LXJvYmxveC9yZWZzL2hlYWRzL21haW4vYWltYm90LWJ5SmhvbmFEZXYxMzlfWVQnKSkoKQoJCQllbmR9LAoKCgp7bmFtZSA9ICJTaGlmdCBMb2NrIiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgIGxvY2FsIHNldHRpbmdzID0gVXNlclNldHRpbmdzKCk6R2V0U2VydmljZSgiVXNlckdhbWVTZXR0aW5ncyIpCgogICAgc2hpZnRMb2NrRW5hYmxlZCA9IG5vdCBzaGlmdExvY2tFbmFibGVkCgogICAgaWYgc2hpZnRMb2NrRW5hYmxlZCB0aGVuCiAgICAgICAgc2V0dGluZ3MuUm90YXRpb25UeXBlID0gRW51bS5Sb3RhdGlvblR5cGUuQ2FtZXJhUmVsYXRpdmUKICAgICAgICBwcmludCgiU2hpZnQgTG9jayBhdGl2YWRvIikKICAgIGVsc2UKICAgICAgICBzZXR0aW5ncy5Sb3RhdGlvblR5cGUgPSBFbnVtLlJvdGF0aW9uVHlwZS5Nb3ZlbWVudFJlbGF0aXZlCiAgICAgICAgcHJpbnQoIlNoaWZ0IExvY2sgZGVzYXRpdmFkbyIpCiAgICBlbmQKZW5kfSwKCQl7bmFtZSA9ICJMaW5lIHZpc2lvbiIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBpZiBfRy5saW5oYVZpc2FvQXRpdmEgdGhlbgogICAgICAgIF9HLmxpbmhhVmlzYW9BdGl2YSA9IGZhbHNlCgogICAgICAgIGZvciBfLCBwbHIgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgY2hhciB0aGVuCiAgICAgICAgICAgICAgICBmb3IgXywgb2JqIGluIHBhaXJzKGNoYXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBpZiBvYmouTmFtZSA9PSAiTGluaGFWaXNhbyIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBvYmo6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIGlmIF9HLmxvb3BMaW5oYSB0aGVuCiAgICAgICAgICAgIF9HLmxvb3BMaW5oYTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgX0cubG9vcExpbmhhID0gbmlsCiAgICAgICAgZW5kCgogICAgICAgIHJldHVybgogICAgZW5kCgogICAgX0cubGluaGFWaXNhb0F0aXZhID0gdHJ1ZQoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyaWFyTGluaGEocGxyKQogICAgICAgIGlmIHBsciA9PSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgICAgICBpZiBub3QgY2hhciBvciBub3QgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIHRoZW4gcmV0dXJuIGVuZAoKICAgICAgICBsb2NhbCBhdHQwID0gSW5zdGFuY2UubmV3KCJBdHRhY2htZW50IiwgY2hhci5IZWFkKQogICAgICAgIGF0dDAuTmFtZSA9ICJMaW5oYVZpc2FvIgoKICAgICAgICBsb2NhbCBwYXJ0ID0gSW5zdGFuY2UubmV3KCJQYXJ0IiwgY2hhcikKICAgICAgICBwYXJ0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgcGFydC5UcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgcGFydC5TaXplID0gVmVjdG9yMy5uZXcoMC4xLCAwLjEsIDAuMSkKICAgICAgICBwYXJ0Lk5hbWUgPSAiTGluaGFWaXNhbyIKCiAgICAgICAgbG9jYWwgYXR0MSA9IEluc3RhbmNlLm5ldygiQXR0YWNobWVudCIsIHBhcnQpCiAgICAgICAgYXR0MS5OYW1lID0gIkxpbmhhVmlzYW8iCgogICAgICAgIGxvY2FsIGJlYW0gPSBJbnN0YW5jZS5uZXcoIkJlYW0iLCBjaGFyKQogICAgICAgIGJlYW0uQXR0YWNobWVudDAgPSBhdHQwCiAgICAgICAgYmVhbS5BdHRhY2htZW50MSA9IGF0dDEKICAgICAgICBiZWFtLldpZHRoMCA9IDAuMDUKICAgICAgICBiZWFtLldpZHRoMSA9IDAuMDUKICAgICAgICBiZWFtLkNvbG9yID0gQ29sb3JTZXF1ZW5jZS5uZXcoQ29sb3IzLm5ldygxLCAwLCAwKSkKICAgICAgICBiZWFtLkZhY2VDYW1lcmEgPSB0cnVlCiAgICAgICAgYmVhbS5MaWdodEluZmx1ZW5jZSA9IDAKICAgICAgICBiZWFtLk5hbWUgPSAiTGluaGFWaXNhbyIKCiAgICAgICAgcGFydC5Qb3NpdGlvbiA9IGNoYXIuSGVhZC5Qb3NpdGlvbiArIChjaGFyLkhlYWQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAxMCkKICAgIGVuZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGNyaWFyRW1Ub2RvcygpCiAgICAgICAgZm9yIF8sIHBsciBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICBjcmlhckxpbmhhKHBscikKICAgICAgICBlbmQKICAgIGVuZAoKICAgIGNyaWFyRW1Ub2RvcygpCgogICAgZ2FtZS5QbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxyKQogICAgICAgIHBsci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2FpdCgxKQogICAgICAgICAgICBpZiBfRy5saW5oYVZpc2FvQXRpdmEgdGhlbgogICAgICAgICAgICAgICAgY3JpYXJMaW5oYShwbHIpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZCkKCiAgICBfRy5sb29wTGluaGEgPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGZvciBfLCBwbHIgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgaWYgcGxyIH49IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllciBhbmQgcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSGVhZCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIGhlYWQgPSBwbHIuQ2hhcmFjdGVyLkhlYWQKICAgICAgICAgICAgICAgIGxvY2FsIHBhcnQgPSBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJMaW5oYVZpc2FvIikKICAgICAgICAgICAgICAgIGlmIHBhcnQgdGhlbgogICAgICAgICAgICAgICAgICAgIHBhcnQuUG9zaXRpb24gPSBoZWFkLlBvc2l0aW9uICsgKGhlYWQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAxMCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZCkKZW5kfSwKICAgICAgICB7bmFtZSA9ICJUZXJnZXRpbmcgTGluZSIsIGZ1bmMgPSBmdW5jdGlvbigpIAogICAgICAgIGlmIGxpbmUgdGhlbiAgCiAgICAgICAgbGluZTpSZW1vdmUoKSAgLS0gUmVtb3ZlIGEgbGluaGEgZXhpc3RlbnRlICAKICAgICAgICBsaW5lID0gbmlsICAKCiAgICAgICAgaWYgY29ubmVjdGlvbiB0aGVuICAKICAgICAgICAgICAgY29ubmVjdGlvbjpEaXNjb25uZWN0KCkgIC0tIFBhcmEgZGUgYXR1YWxpemFyIGEgbGluaGEgIAogICAgICAgICAgICBjb25uZWN0aW9uID0gbmlsICAKICAgICAgICBlbmQgIAogICAgICAgIHJldHVybiAgLS0gU2FpIGRhIGZ1bsOnw6NvIHBhcmEgZXZpdGFyIHJlY3JpYXIgYSBsaW5oYSBpbWVkaWF0YW1lbnRlICAKICAgIGVuZCAgCgogICAgbGluZSA9IERyYXdpbmcubmV3KCJMaW5lIikgIAogICAgbGluZS5UaGlja25lc3MgPSAyICAKICAgIGxpbmUuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApICAKCiAgICBjb25uZWN0aW9uID0gUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKSAgCiAgICAgICAgbG9jYWwgY2xvc2VzdFBsYXllciA9IG5pbCAgCiAgICAgICAgbG9jYWwgY2xvc2VzdERpc3QgPSBtYXRoLmh1Z2UgIAoKICAgICAgICBmb3IgXywgb3RoZXJQbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvICAKICAgICAgICAgICAgaWYgb3RoZXJQbGF5ZXIgfj0gcGxheWVyIGFuZCBvdGhlclBsYXllci5DaGFyYWN0ZXIgYW5kIG90aGVyUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4gIAogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zLCBvblNjcmVlbiA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChvdGhlclBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikgIAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5DZW50ZXIgPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkgLyAyKSAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0U2NyZWVuUG9zID0gVmVjdG9yMi5uZXcodGFyZ2V0UG9zLlgsIHRhcmdldFBvcy5ZKSAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChzY3JlZW5DZW50ZXIgLSB0YXJnZXRTY3JlZW5Qb3MpLk1hZ25pdHVkZSAgCgogICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBjbG9zZXN0RGlzdCB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERpc3QgPSBkaXN0ICAKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBsYXllciA9IG90aGVyUGxheWVyICAKICAgICAgICAgICAgICAgICAgICBlbmQgIAogICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgZW5kICAKICAgICAgICBlbmQgIAoKICAgICAgICBpZiBjbG9zZXN0UGxheWVyIHRoZW4gIAogICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MgPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQoY2xvc2VzdFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikgIAogICAgICAgICAgICBsaW5lLkZyb20gPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkpICAKICAgICAgICAgICAgbGluZS5UbyA9IFZlY3RvcjIubmV3KHRhcmdldFBvcy5YLCB0YXJnZXRQb3MuWSkgIAogICAgICAgICAgICBsaW5lLlZpc2libGUgPSB0cnVlICAKICAgICAgICBlbHNlICAKICAgICAgICAgICAgbGluZS5WaXNpYmxlID0gZmFsc2UgIAogICAgICAgIGVuZCAgCiAgICBlbmQpICAKZW5kfSwKCi0tLTEtMS0xLTEtMS0xLTEtMS0xLTEtMS0xLTEKe25hbWUgPSAiQ2hhbXMiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgY2hhbXNFbmFibGVkID0gbm90IGNoYW1zRW5hYmxlZAoKICAgIGxvY2FsIGZ1bmN0aW9uIGFwbGljYXJDaGFtcyhjaGFyYWN0ZXIpCiAgICAgICAgaWYgbm90IGNoYXJhY3RlciB0aGVuIHJldHVybiBlbmQKICAgICAgICBsb2NhbCBoaWdobGlnaHQgPSBjaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNoYW1zRWZmZWN0IikKICAgICAgICBpZiBub3QgaGlnaGxpZ2h0IHRoZW4KICAgICAgICAgICAgaGlnaGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJIaWdobGlnaHQiKQogICAgICAgICAgICBoaWdobGlnaHQuTmFtZSA9ICJDaGFtc0VmZmVjdCIKICAgICAgICAgICAgaGlnaGxpZ2h0LkZpbGxDb2xvciA9IENvbG9yMy5mcm9tUkdCKGNoYW1zUiwgY2hhbXNHLCBjaGFtc0IpCiAgICAgICAgICAgIGhpZ2hsaWdodC5PdXRsaW5lQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgICAgICAgICBoaWdobGlnaHQuUGFyZW50ID0gY2hhcmFjdGVyCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBpZiBjaGFtc0VuYWJsZWQgdGhlbgogICAgICAgIC0tIEFwbGljYSBhb3Mgam9nYWRvcmVzIGF0dWFpcwogICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgYXBsaWNhckNoYW1zKHBsYXllci5DaGFyYWN0ZXIpCiAgICAgICAgICAgIGxvY2FsIGNoYXJDb25uID0gcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgICAgICAgICAgIGFwbGljYXJDaGFtcyhjaGFyKQogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25uZWN0aW9ucywgY2hhckNvbm4pCiAgICAgICAgZW5kCgogICAgICAgIC0tIERldGVjdGEgbm92b3Mgam9nYWRvcmVzCiAgICAgICAgbG9jYWwgam9pbkNvbm4gPSBnYW1lLlBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCiAgICAgICAgICAgIGxvY2FsIGNoYXJDb25uID0gcGxheWVyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgICAgICAgICAgIGFwbGljYXJDaGFtcyhjaGFyKQogICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25uZWN0aW9ucywgY2hhckNvbm4pCiAgICAgICAgZW5kKQogICAgICAgIHRhYmxlLmluc2VydChjb25uZWN0aW9ucywgam9pbkNvbm4pCgogICAgICAgIC0tIOKaoO+4jyBDcmlhw6fDo28gZG9zIHNsaWRlcnMgUkdCOgogICAgICAgIGV4dHJhUGFuZWwuVmlzaWJsZSA9IHRydWUKICAgICAgICBleHRyYVBhbmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCgogICAgICAgIC0tIEV2aXRhIG3Dumx0aXBsb3Mgc2xpZGVycyByZXBldGlkb3MKICAgICAgICBpZiBub3Qgc2xpZGVyc0NyaWFkb3MgdGhlbgogICAgICAgICAgICBjcmlhck5vdm9TbGlkZXIoIkNoYW1zIC0gVmVybWVsaG8iLCAwLCAyNTUsIGZ1bmN0aW9uKHYpCiAgICAgICAgICAgICAgICBjaGFtc1IgPSB2CiAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGggPSBwLkNoYXJhY3RlciBhbmQgcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNoYW1zRWZmZWN0IikKICAgICAgICAgICAgICAgICAgICBpZiBoIHRoZW4gaC5GaWxsQ29sb3IgPSBDb2xvcjMuZnJvbVJHQihjaGFtc1IsIGNoYW1zRywgY2hhbXNCKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCgogICAgICAgICAgICBjcmlhck5vdm9TbGlkZXIoIkNoYW1zIC0gVmVyZGUiLCAwLCAyNTUsIGZ1bmN0aW9uKHYpCiAgICAgICAgICAgICAgICBjaGFtc0cgPSB2CiAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhnYW1lLlBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgICAgIGxvY2FsIGggPSBwLkNoYXJhY3RlciBhbmQgcC5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkNoYW1zRWZmZWN0IikKICAgICAgICAgICAgICAgICAgICBpZiBoIHRoZW4gaC5GaWxsQ29sb3IgPSBDb2xvcjMuZnJvbVJHQihjaGFtc1IsIGNoYW1zRywgY2hhbXNCKSBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQpCgogICAgICAgICAgICBjcmlhck5vdm9TbGlkZXIoIkNoYW1zIC0gQXp1bCIsIDAsIDI1NSwgZnVuY3Rpb24odikKICAgICAgICAgICAgICAgIGNoYW1zQiA9IHYKICAgICAgICAgICAgICAgIGZvciBfLCBwIGluIHBhaXJzKGdhbWUuUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgaCA9IHAuQ2hhcmFjdGVyIGFuZCBwLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiQ2hhbXNFZmZlY3QiKQogICAgICAgICAgICAgICAgICAgIGlmIGggdGhlbiBoLkZpbGxDb2xvciA9IENvbG9yMy5mcm9tUkdCKGNoYW1zUiwgY2hhbXNHLCBjaGFtc0IpIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKCiAgICAgICAgICAgIHNsaWRlcnNDcmlhZG9zID0gdHJ1ZSAtLSBNYXJjYSBxdWUgasOhIGZvcmFtIGNyaWFkb3MKICAgICAgICBlbmQKCiAgICBlbHNlCiAgICAgICAgZm9yIF8sIHAgaW4gcGFpcnMoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgbG9jYWwgY2hhciA9IHAuQ2hhcmFjdGVyCiAgICAgICAgICAgIGlmIGNoYXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaCA9IGNoYXI6RmluZEZpcnN0Q2hpbGQoIkNoYW1zRWZmZWN0IikKICAgICAgICAgICAgICAgIGlmIGggdGhlbiBoOkRlc3Ryb3koKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIF8sIGMgaW4gcGFpcnMoY29ubmVjdGlvbnMpIGRvCiAgICAgICAgICAgIGM6RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgICAgY29ubmVjdGlvbnMgPSB7fQogICAgICAgIHNsaWRlcnNDcmlhZG9zID0gZmFsc2UgLS0gUGVybWl0ZSBjcmlhciBkZSBub3ZvIGRlcG9pcwogICAgZW5kCmVuZH0sCgoKCgoKCgoKe25hbWUgPSAiRVNQIG5hbWUiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgZXNwRW5hYmxlZCA9IG5vdCBlc3BFbmFibGVkCgogICAgaWYgZXNwRW5hYmxlZCB0aGVuCiAgICAgICAgLS0gMSkgQ3JpYXIgc2xpZGVycyBSR0Igbm8gZXh0cmFQYW5lbAogICAgICAgIGV4dHJhUGFuZWwuVmlzaWJsZSA9IHRydWUKICAgICAgICBleHRyYVBhbmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCgogICAgICAgIGNyaWFyTm92b1NsaWRlcigiRVNQTmFtZSAtIFZlcm1lbGhvIiwgMCwgMjU1LCBmdW5jdGlvbih2KQogICAgZXNwQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigKICAgICAgICB2LAogICAgICAgIG1hdGguZmxvb3IoZXNwQ29sb3IuRyAqIDI1NSksCiAgICAgICAgbWF0aC5mbG9vcihlc3BDb2xvci5CICogMjU1KQogICAgKQplbmQpCgpjcmlhck5vdm9TbGlkZXIoIkVTUE5hbWUgLSBWZXJkZSIsIDAsIDI1NSwgZnVuY3Rpb24odikKICAgIGVzcENvbG9yID0gQ29sb3IzLmZyb21SR0IoCiAgICAgICAgbWF0aC5mbG9vcihlc3BDb2xvci5SICogMjU1KSwKICAgICAgICB2LAogICAgICAgIG1hdGguZmxvb3IoZXNwQ29sb3IuQiAqIDI1NSkKICAgICkKZW5kKQoKY3JpYXJOb3ZvU2xpZGVyKCJFU1BOYW1lIC0gQXp1bCIsIDAsIDI1NSwgZnVuY3Rpb24odikKICAgIGVzcENvbG9yID0gQ29sb3IzLmZyb21SR0IoCiAgICAgICAgbWF0aC5mbG9vcihlc3BDb2xvci5SICogMjU1KSwKICAgICAgICBtYXRoLmZsb29yKGVzcENvbG9yLkcgKiAyNTUpLAogICAgICAgIHYKICAgICkKZW5kKQoKICAgICAgICAtLSAyKSBMb29wIGNvbnTDrW51byBwYXJhIGFwbGljYXIgRVNQIG5hbWUgZW0gdG9kb3MgKG5vdm9zLCByZXNwYXducyBlIGrDoSBleGlzdGVudGVzKQogICAgICAgIGxvb3BDb25uID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgICAgICAgICAgaWYgcGxheWVyIH49IFBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGNoYXIgPSBwbGF5ZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgICAgICAgaWYgY2hhciBhbmQgY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHJwID0gY2hhci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGd1aSA9IGhycDpGaW5kRmlyc3RDaGlsZCgiRVNQTGFiZWwiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgZ3VpIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIiwgaHJwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VpLk5hbWUgPSAiRVNQTGFiZWwiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuU2l6ZSA9IFVEaW0yLm5ldygwLCA3MCwgMCwgMTApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBndWkuQWRvcm5lZSA9IGhycAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3VpLkFsd2F5c09uVG9wID0gdHJ1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIsIGd1aSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMSwgMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGV4dExhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiLCBmcmFtZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMYWJlbC5OYW1lID0gIkVTUFRleHQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAxLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0TGFiZWwuVGV4dFNjYWxlZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRMYWJlbC5UZXh0ID0gcGxheWVyLk5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIGF0dWFsaXphIGNvciBlbSB0ZW1wbyByZWFsCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIHRleHQgPSBndWkuRnJhbWU6RmluZEZpcnN0Q2hpbGQoIkVTUFRleHQiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiB0ZXh0IHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuVGV4dENvbG9yMyA9IGVzcENvbG9yCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKCiAgICBlbHNlCiAgICAgICAgLS0gMSkgUGFyYXIgbyBsb29wCiAgICAgICAgaWYgbG9vcENvbm4gdGhlbgogICAgICAgICAgICBsb29wQ29ubjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgbG9vcENvbm4gPSBuaWwKICAgICAgICBlbmQKCiAgICAgICAgLS0gMikgRGVzdHJ1aXIgdG9kb3Mgb3MgRVNQTGFiZWxzCiAgICAgICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgaHJwID0gcGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICBpZiBocnAgdGhlbgogICAgICAgICAgICAgICAgICAgIGxvY2FsIGd1aSA9IGhycDpGaW5kRmlyc3RDaGlsZCgiRVNQTGFiZWwiKQogICAgICAgICAgICAgICAgICAgIGlmIGd1aSB0aGVuIGd1aTpEZXN0cm95KCkgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCgogICAgICAgIC0tIDMpIERlc3RydWlyIHNvbWVudGUgb3Mgc2xpZGVyRnJhbWVzIGRvIEVTUCBuYW1lCiAgICAgICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyhleHRyYVBhbmVsOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIGNoaWxkOklzQSgiRnJhbWUiKSBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUZXh0TGFiZWwiKQogICAgICAgICAgICAgICBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJUZXh0TGFiZWwiKS5UZXh0Om1hdGNoKCJeRVNQTmFtZSIpIHRoZW4KICAgICAgICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgLS0gNCkgT2N1bHRhciBleHRyYVBhbmVsIHNlIHZhemlvCiAgICAgICAgaWYgI2V4dHJhUGFuZWw6R2V0Q2hpbGRyZW4oKSA9PSAwIHRoZW4KICAgICAgICAgICAgZXh0cmFQYW5lbC5WaXNpYmxlID0gZmFsc2UKICAgICAgICBlbmQKICAgIGVuZAplbmR9LAoKCgoKICAgIAogIHtuYW1lID0gIkVTUCBCb3giLCAgZnVuYyA9IChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgZXNwQXRpdm8gPSBmYWxzZQogICAgICAgIGxvY2FsIGNvbmV4b2VzID0ge30KICAgICAgICBsb2NhbCBlc3BHdWkgPSBuaWwKICAgICAgICBsb2NhbCBjYWl4YXMgPSB7fQoKICAgICAgICByZXR1cm4gZnVuY3Rpb24oKQogICAgICAgICAKCiAgICAgICAgICAgIGlmIG5vdCBlc3BBdGl2byB0aGVuCiAgICAgICAgICAgICAgICBlc3BBdGl2byA9IHRydWUKCiAgICAgICAgICAgICAgICBlc3BHdWkgPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICAgICAgICAgICAgICBlc3BHdWkuTmFtZSA9ICJrc25laWRuZG5zbyIKICAgICAgICAgICAgICAgIGVzcEd1aS5SZXNldE9uU3Bhd24gPSBmYWxzZQogICAgICAgICAgICAgICAgZXNwR3VpLlpJbmRleEJlaGF2aW9yID0gRW51bS5aSW5kZXhCZWhhdmlvci5TaWJsaW5nCiAgICAgICAgICAgICAgICBlc3BHdWkuSWdub3JlR3VpSW5zZXQgPSB0cnVlCiAgICAgICAgICAgICAgICBlc3BHdWkuRGlzcGxheU9yZGVyID0gMTAwCiAgICAgICAgICAgICAgICBlc3BHdWkuUGFyZW50ID0gTG9jYWxQbGF5ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJQbGF5ZXJHdWkiKSBvciBMb2NhbFBsYXllci5QbGF5ZXJHdWkKCiAgICAgICAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBjcmlhckNhaXhhKHBsYXllcikKICAgICAgICAgICAgICAgICAgICBpZiBwbGF5ZXIgPT0gTG9jYWxQbGF5ZXIgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2FpeGEgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICAgICAgICAgICAgICBjYWl4YS5OYW1lID0gcGxheWVyLk5hbWUgLi4gIl9FU1BCb3giCiAgICAgICAgICAgICAgICAgICAgY2FpeGEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICAgICAgICBjYWl4YS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICAgICAgICAgICAgY2FpeGEuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLjUsIDAuNSkKICAgICAgICAgICAgICAgICAgICBjYWl4YS5aSW5kZXggPSAxMAogICAgICAgICAgICAgICAgICAgIGNhaXhhLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGNhaXhhLlBhcmVudCA9IGVzcEd1aQoKICAgICAgICAgICAgICAgICAgICBsb2NhbCBib3JkYSA9IEluc3RhbmNlLm5ldygiVUlTdHJva2UiLCBjYWl4YSkKICAgICAgICAgICAgICAgICAgICBib3JkYS5Db2xvciA9IENvbG9yMy5uZXcoMSwgMCwgMCkKICAgICAgICAgICAgICAgICAgICBib3JkYS5UaGlja25lc3MgPSAxLjUKICAgICAgICAgICAgICAgICAgICBib3JkYS5UcmFuc3BhcmVuY3kgPSAwCgogICAgICAgICAgICAgICAgICAgIGNhaXhhc1twbGF5ZXJdID0gY2FpeGEKCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgY29ubiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgY2hhciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGNoYXIgdGhlbiBjYWl4YS5WaXNpYmxlID0gZmFsc2UgcmV0dXJuIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHJwID0gY2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGhlYWQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgKGhycCBhbmQgaGVhZCBhbmQgaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhlYWx0aCA+IDApIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhaXhhLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgcG9udG9zID0ge30KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIF8sIG9mZnNldCBpbiBpcGFpcnMoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEuNSwgMi41LCAtMS41KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEuNSwgMi41LCAtMS41KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMubmV3KDEuNSwgMi41LCAxLjUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEuNSwgMi41LCAxLjUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEuNSwgLTIuNSwgLTEuNSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLm5ldygxLjUsIC0yLjUsIC0xLjUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoMS41LCAtMi41LCAxLjUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5uZXcoLTEuNSwgLTIuNSwgMS41KSwKICAgICAgICAgICAgICAgICAgICAgICAgfSkgZG8KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChwb250b3MsIGhycC5Qb3NpdGlvbiArIG9mZnNldCkKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBtaW5YLCBtaW5ZID0gbWF0aC5odWdlLCBtYXRoLmh1Z2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbWF4WCwgbWF4WSA9IC1tYXRoLmh1Z2UsIC1tYXRoLmh1Z2UKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmlzaXZlbCA9IGZhbHNlCgogICAgICAgICAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBpcGFpcnMocG9udG9zKSBkbwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2NyZWVuLCBvblNjcmVlbiA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgb25TY3JlZW4gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pblggPSBtYXRoLm1pbihtaW5YLCBzY3JlZW4uWCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5ZID0gbWF0aC5taW4obWluWSwgc2NyZWVuLlkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4WCA9IG1hdGgubWF4KG1heFgsIHNjcmVlbi5YKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFkgPSBtYXRoLm1heChtYXhZLCBzY3JlZW4uWSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpdmVsID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgICAgIGVuZAoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgdmlzaXZlbCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWl4YS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FpeGEuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgKG1pblggKyBtYXhYKSAvIDIsIDAsIChtaW5ZICsgbWF4WSkgLyAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FpeGEuU2l6ZSA9IFVEaW0yLm5ldygwLCBtYXhYIC0gbWluWCwgMCwgbWF4WSAtIG1pblkpCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhaXhhLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBlbmQpCgogICAgICAgICAgICAgICAgICAgIGNvbmV4b2VzW3BsYXllcl0gPSBjb25uCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICBmb3IgXywgcCBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgICAgICBjcmlhckNhaXhhKHApCiAgICAgICAgICAgICAgICBlbmQKCiAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoY29uZXhvZXMsIFBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChjcmlhckNhaXhhKSkKICAgICAgICAgICAgICAgIHRhYmxlLmluc2VydChjb25leG9lcywgUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHApCiAgICAgICAgICAgICAgICAgICAgaWYgY29uZXhvZXNbcF0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjb25leG9lc1twXTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgY29uZXhvZXNbcF0gPSBuaWwKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgICBpZiBjYWl4YXNbcF0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjYWl4YXNbcF06RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhaXhhc1twXSA9IG5pbAogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kKSkKCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGVzcEF0aXZvID0gZmFsc2UKICAgICAgICAgICAgICAgIGZvciBfLCBjIGluIHBhaXJzKGNvbmV4b2VzKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIHR5cGVvZihjKSA9PSAiUkJYU2NyaXB0Q29ubmVjdGlvbiIgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBjOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBmb3IgXywgYyBpbiBwYWlycyhjb25leG9lcykgZG8KICAgICAgICAgICAgICAgICAgICBpZiB0eXBlb2YoYykgPT0gImZ1bmN0aW9uIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIHBjYWxsKGMpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGNvbmV4b2VzID0ge30KCiAgICAgICAgICAgICAgICBmb3IgXywgY2FpeGEgaW4gcGFpcnMoY2FpeGFzKSBkbwogICAgICAgICAgICAgICAgICAgIGlmIGNhaXhhIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgY2FpeGE6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGNhaXhhcyA9IHt9CgogICAgICAgICAgICAgICAgaWYgZXNwR3VpIHRoZW4KICAgICAgICAgICAgICAgICAgICBlc3BHdWk6RGVzdHJveSgpCiAgICAgICAgICAgICAgICAgICAgZXNwR3VpID0gbmlsCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICBlbmQpKCkKfSwKCntuYW1lID0gIkVzcCBMaW5lIiwgZnVuYyA9IGZ1bmN0aW9uKCkKbG9jYWwgZnVuY3Rpb24gVXBkYXRlRVNQKCkKICAgIGlmIGVzcEVuYWJsZWQgdGhlbgogICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIHBsYXllci5DaGFyYWN0ZXIgYW5kIHBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCByb290UGFydCA9IHBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgICAgICAgICAgbG9jYWwgc2NyZWVuUG9zLCBvblNjcmVlbiA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChyb290UGFydC5Qb3NpdGlvbikKCiAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgbm90IGVzcExpbmVzW3BsYXllcl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3BMaW5lc1twbGF5ZXJdID0gRHJhd2luZy5uZXcoIkxpbmUiKQogICAgICAgICAgICAgICAgICAgICAgICBlc3BMaW5lc1twbGF5ZXJdLlRoaWNrbmVzcyA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgZXNwTGluZXNbcGxheWVyXS5Db2xvciA9IGVzcENvbG9yCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZXNwTGluZXNbcGxheWVyXS5Gcm9tID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YIC8gMiwgQ2FtZXJhLlZpZXdwb3J0U2l6ZS5ZKQogICAgICAgICAgICAgICAgICAgIGVzcExpbmVzW3BsYXllcl0uVG8gPSBWZWN0b3IyLm5ldyhzY3JlZW5Qb3MuWCwgc2NyZWVuUG9zLlkpCiAgICAgICAgICAgICAgICAgICAgZXNwTGluZXNbcGxheWVyXS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIGlmIGVzcExpbmVzW3BsYXllcl0gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICBlc3BMaW5lc1twbGF5ZXJdLlZpc2libGUgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgZWxzZQogICAgICAgIGZvciBfLCBsaW5lIGluIHBhaXJzKGVzcExpbmVzKSBkbwogICAgICAgICAgICBsaW5lOlJlbW92ZSgpCiAgICAgICAgZW5kCiAgICAgICAgZXNwTGluZXMgPSB7fQogICAgZW5kCmVuZAoKUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoVXBkYXRlRVNQKQoKICAgIGVzcEVuYWJsZWQgPSBub3QgZXNwRW5hYmxlZAplbmR9LAoKCiAgICAgICAge25hbWUgPSAiVGFyZ2V0aW5nIENpcmNsZSIsIGZ1bmMgPSBmdW5jdGlvbigpIAogICAgICAgICAgICBpZiBjaXJjbGUgdGhlbiAgCiAgICAgICAgY2lyY2xlOlJlbW92ZSgpICAtLSBSZW1vdmUgbyBjw61yY3VsbyBleGlzdGVudGUgIAogICAgICAgIGNpcmNsZSA9IG5pbCAgCgogICAgICAgIGlmIGNvbm5lY3Rpb24gdGhlbiAgCiAgICAgICAgICAgIGNvbm5lY3Rpb246RGlzY29ubmVjdCgpICAtLSBQYXJhIGRlIGF0dWFsaXphciBvIGPDrXJjdWxvICAKICAgICAgICAgICAgY29ubmVjdGlvbiA9IG5pbCAgCiAgICAgICAgZW5kICAKICAgICAgICByZXR1cm4gIC0tIFNhaSBkYSBmdW7Dp8OjbyBwYXJhIGV2aXRhciByZWNyaWFyIG8gY8OtcmN1bG8gaW1lZGlhdGFtZW50ZSAgCiAgICBlbmQgIAoKICAgIGNpcmNsZSA9IERyYXdpbmcubmV3KCJDaXJjbGUiKSAgCiAgICBjaXJjbGUuVGhpY2tuZXNzID0gMiAgCiAgICBjaXJjbGUuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDAsIDApCiAgICBjaXJjbGUuUmFkaXVzID0gMTAgIC0tIEFqdXN0ZSBvIHJhaW8gY29uZm9ybWUgbmVjZXNzw6FyaW8KICAgIGNpcmNsZS5GaWxsZWQgPSBmYWxzZQogICAgY29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBjbG9zZXN0UGxheWVyID0gbmlsICAKICAgICAgICBsb2NhbCBjbG9zZXN0RGlzdCA9IG1hdGguaHVnZSAgCgogICAgICAgIGZvciBfLCBvdGhlclBsYXllciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8gIAogICAgICAgICAgICBpZiBvdGhlclBsYXllciB+PSBwbGF5ZXIgYW5kIG90aGVyUGxheWVyLkNoYXJhY3RlciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIZWFkIikgdGhlbiAgCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KG90aGVyUGxheWVyLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiBvblNjcmVlbiB0aGVuICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5DZW50ZXIgPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkgLyAyKSAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0U2NyZWVuUG9zID0gVmVjdG9yMi5uZXcodGFyZ2V0UG9zLlgsIHRhcmdldFBvcy5ZKSAgCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChzY3JlZW5DZW50ZXIgLSB0YXJnZXRTY3JlZW5Qb3MpLk1hZ25pdHVkZSAgCgogICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBjbG9zZXN0RGlzdCB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERpc3QgPSBkaXN0ICAKICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdFBsYXllciA9IG90aGVyUGxheWVyICAKICAgICAgICAgICAgICAgICAgICBlbmQgIAogICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgZW5kICAKICAgICAgICBlbmQgIAoKICAgICAgICBpZiBjbG9zZXN0UGxheWVyIHRoZW4gIAogICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MgPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQoY2xvc2VzdFBsYXllci5DaGFyYWN0ZXIuSGVhZC5Qb3NpdGlvbikgIAogICAgICAgICAgICBjaXJjbGUuUG9zaXRpb24gPSBWZWN0b3IyLm5ldyh0YXJnZXRQb3MuWCwgdGFyZ2V0UG9zLlkpICAKICAgICAgICAgICAgY2lyY2xlLlZpc2libGUgPSB0cnVlICAKICAgICAgICBlbHNlICAKICAgICAgICAgICAgY2lyY2xlLlZpc2libGUgPSBmYWxzZSAgCiAgICAgICAgZW5kICAKICAgIGVuZCkKZW5kfSwKCntuYW1lID0gIkZvZyIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICAKCiAgICBsb2NhbCBmdW5jdGlvbiB0b2dnbGVGb2coKQogICAgICAgIGxvY2FsIGxpZ2h0aW5nID0gZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpCgogICAgICAgIC0tIEFsdGVybmEgbyBlc3RhZG8gYW50ZXMgZGUgYXBsaWNhciBhcyBtdWRhbsOnYXMKICAgICAgICBmb2dFbmFibGVkID0gbm90IGZvZ0VuYWJsZWQgIAoKICAgICAgICBpZiBmb2dFbmFibGVkIHRoZW4KICAgICAgICAgICAgLS0gU2FsdmEgb3MgdmFsb3JlcyBhdHVhaXMgYW50ZXMgZGUgcmVtb3ZlciBvIGZvZwogICAgICAgICAgICBmb2dTdGFydCA9IGxpZ2h0aW5nLkZvZ1N0YXJ0CiAgICAgICAgICAgIGZvZ0VuZCA9IGxpZ2h0aW5nLkZvZ0VuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gUmVtb3ZlIG8gZm9nCiAgICAgICAgICAgIGxpZ2h0aW5nLkZvZ1N0YXJ0ID0gMTAwMDAwCiAgICAgICAgICAgIGxpZ2h0aW5nLkZvZ0VuZCA9IDEwMDAwMAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gQ29uZ2VsYSBvcyB2YWxvcmVzIHBhcmEgaW1wZWRpciBtdWRhbsOnYXMgZXh0ZXJuYXMKICAgICAgICAgICAgZm9nU3RhcnRDb25uZWN0aW9uID0gbGlnaHRpbmc6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJGb2dTdGFydCIpOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbGlnaHRpbmcuRm9nU3RhcnQgPSAxMDAwMDAKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBmb2dFbmRDb25uZWN0aW9uID0gbGlnaHRpbmc6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJGb2dFbmQiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgIGxpZ2h0aW5nLkZvZ0VuZCA9IDEwMDAwMAogICAgICAgICAgICBlbmQpCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSBSZXN0YXVyYSBvcyB2YWxvcmVzIG9yaWdpbmFpcwogICAgICAgICAgICBsaWdodGluZy5Gb2dTdGFydCA9IGZvZ1N0YXJ0CiAgICAgICAgICAgIGxpZ2h0aW5nLkZvZ0VuZCA9IGZvZ0VuZAogICAgICAgICAgICAKICAgICAgICAgICAgLS0gRGVzY29uZ2VsYSwgcGVybWl0aW5kbyBxdWUgbyBqb2dvIGFsdGVyZSBub3ZhbWVudGUKICAgICAgICAgICAgaWYgZm9nU3RhcnRDb25uZWN0aW9uIHRoZW4gZm9nU3RhcnRDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgICAgaWYgZm9nRW5kQ29ubmVjdGlvbiB0aGVuIGZvZ0VuZENvbm5lY3Rpb246RGlzY29ubmVjdCgpIGVuZAogICAgICAgIGVuZAoKICAgICAgICAtLSBOb3RpZmljYcOnw6NvIHZpc3VhbCBjb3JyZXRhCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsgIAogICAgICAgICAgICBUaXRsZSA9ICJGb2cgVG9nZ2xlIiwgIAogICAgICAgICAgICBUZXh0ID0gZm9nRW5hYmxlZCBhbmQgIkZvZyBPRkYiIG9yICJGb2cgT04iLCAgCiAgICAgICAgICAgIEljb24gPSBmb2dFbmFibGVkIGFuZCAicmJ4YXNzZXRpZDovLzcwNzI3MjE0NDMiIG9yICJyYnhhc3NldGlkOi8vNzA3MjcxOTMzMyIsICAKICAgICAgICAgICAgRHVyYXRpb24gPSAzICAKICAgICAgICB9KSAgCiAgICBlbmQKCiAgICAtLSBDaGFtYSBhIGZ1bsOnw6NvIHBhcmEgYXRpdmFyL2Rlc2F0aXZhciBvIGVmZWl0bwogICAgdG9nZ2xlRm9nKCkKCmVuZH0sCgogICAgfSwgLS0gRkVDSEFSIEEgQ0FURUdPUklBCiAgICAKICAgICAgICBbIlRQIHRvb2wiXSA9IHsKICAgICAgICB7bmFtZSA9ICJUUCBmb3J3YXJkIiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwgcm9vdCA9IGNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgcm9vdC5DRnJhbWUgPSByb290LkNGcmFtZSAqIENGcmFtZS5uZXcoMCwgMCwgLTEwKQogICAgZW5kfSwKICAgIHtuYW1lID0gIlRQIHNhZmUiLCBmdW5jID0gZnVuY3Rpb24gKCkKICAgIGxvY2FsIHJvb3QgPSBjaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKCiAgICBpZiBub3QgaXNGcm96ZW4gdGhlbgogICAgICAgIC0tIFNhbHZhIGEgcG9zacOnw6NvIG9yaWdpbmFsIGFudGVzIGRlIHRlbGVwb3J0YXIKICAgICAgICBvcmlnaW5hbFBvc2l0aW9uID0gcm9vdC5Qb3NpdGlvbgoKICAgICAgICAtLSBUZWxlcG9ydGEgcGFyYSBhIHBvc2nDp8OjbyBzZWd1cmEKICAgICAgICByb290LkNGcmFtZSA9IENGcmFtZS5uZXcoMCwgLTEwLCAwKQoKICAgICAgICAtLSBDb25nZWxhIG8gam9nYWRvciByZW1vdmVuZG8gYSBncmF2aWRhZGUKICAgICAgICBsb2NhbCBib2R5VmVsb2NpdHkgPSBJbnN0YW5jZS5uZXcoIkJvZHlWZWxvY2l0eSIpCiAgICAgICAgYm9keVZlbG9jaXR5LlZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMCwgMCkgLS0gTWFudMOpbSBlbGUgcGFyYWRvCiAgICAgICAgYm9keVZlbG9jaXR5Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoNDAwMCwgNDAwMCwgNDAwMCkgLS0gRm9yw6dhIG3DoXhpbWEgcGFyYSBpbXBlZGlyIG1vdmltZW50bwogICAgICAgIGJvZHlWZWxvY2l0eS5QYXJlbnQgPSByb290CgogICAgICAgIC0tIE1hcmNhIGNvbW8gY29uZ2VsYWRvCiAgICAgICAgaXNGcm96ZW4gPSB0cnVlCiAgICBlbHNlCiAgICAgICAgLS0gVm9sdGEgcGFyYSBhIHBvc2nDp8OjbyBvcmlnaW5hbAogICAgICAgIHJvb3QuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyhvcmlnaW5hbFBvc2l0aW9uKQoKICAgICAgICAtLSBSZW1vdmUgYSBmb3LDp2EgcXVlIG1hbnRpbmhhIGVsZSBjb25nZWxhZG8KICAgICAgICBmb3IgXywgdiBpbiBwYWlycyhyb290OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgIGlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSB0aGVuCiAgICAgICAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgLS0gUmVzZXRhIG8gZXN0YWRvCiAgICAgICAgaXNGcm96ZW4gPSBmYWxzZQogICAgZW5kCiAgICBlbmR9LAoKCgoKCgoKCgoJCQp7bmFtZSA9ICJGb2xsb3cgVFAiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY29ubmVjdGlvbnMgPSB7fQoKICAgIHRlbGVwb3J0RW5hYmxlZCA9IHRlbGVwb3J0RW5hYmxlZCArIDEKICAgIGlmIHRlbGVwb3J0RW5hYmxlZCA+IDIgdGhlbgogICAgICAgIHRlbGVwb3J0RW5hYmxlZCA9IDAKICAgIGVuZAogIGlmIHRlbGVwb3J0RW5hYmxlZCA9PSAwIHRoZW4KICAgICAgICAtLSBDcmlhIGEgbGluaGEgc2UgZWxhIGFpbmRhIG7Do28gZXhpc3RpciAgCiAgICAgICAgaWYgbm90IGxpbmUgdGhlbiAgCiAgICAgICAgICAgIGxpbmUgPSBEcmF3aW5nLm5ldygiTGluZSIpICAKICAgICAgICAgICAgbGluZS5UaGlja25lc3MgPSAyICAKICAgICAgICAgICAgbGluZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkgIAogICAgICAgIGVuZCAgCiAgCiAgICAgICAgLS0gQXR1YWxpemEgYSBsaW5oYSBhIGNhZGEgZnJhbWUgIAogICAgICAgIGNvbm5lY3Rpb24gPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpICAKICAgICAgICAgICAgbG9jYWwgY2xvc2VzdFBsYXllciA9IG5pbCAgCiAgICAgICAgICAgIGxvY2FsIGNsb3Nlc3REaXN0ID0gbWF0aC5odWdlICAtLSBDb21lw6dhIGNvbSB1bWEgZGlzdMOibmNpYSBtdWl0byBncmFuZGUgIAogIAogICAgICAgICAgICBmb3IgXywgb3RoZXJQbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvICAKICAgICAgICAgICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBvdGhlclBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KG90aGVyUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSAgCiAgCiAgICAgICAgICAgICAgICAgICAgaWYgb25TY3JlZW4gdGhlbiAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIENhbGN1bGEgYSBkaXN0w6JuY2lhIGRvIGNlbnRybyBkYSB0ZWxhICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgc2NyZWVuQ2VudGVyID0gVmVjdG9yMi5uZXcoQ2FtZXJhLlZpZXdwb3J0U2l6ZS5YIC8gMiwgQ2FtZXJhLlZpZXdwb3J0U2l6ZS5ZIC8gMikgIAogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRTY3JlZW5Qb3MgPSBWZWN0b3IyLm5ldyh0YXJnZXRQb3MuWCwgdGFyZ2V0UG9zLlkpICAKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZGlzdCA9IChzY3JlZW5DZW50ZXIgLSB0YXJnZXRTY3JlZW5Qb3MpLk1hZ25pdHVkZSAgCiAgCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFNlIGZvciBvIG1haXMgcHLDs3hpbW8sIGF0dWFsaXphIG8gYWx2byAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBjbG9zZXN0RGlzdCB0aGVuICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0ID0gZGlzdCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0UGxheWVyID0gb3RoZXJQbGF5ZXIgIAogICAgICAgICAgICAgICAgICAgICAgICBlbmQgIAogICAgICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgICAgICBlbmQgIAogICAgICAgICAgICBlbmQgIAogIAogICAgICAgICAgICAtLSBTZSBlbmNvbnRyb3UgdW0gam9nYWRvciwgZGVzZW5oYSBhIGxpbmhhICAKICAgICAgICAgICAgaWYgY2xvc2VzdFBsYXllciB0aGVuICAKICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBvcyA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChjbG9zZXN0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKSAgCiAgICAgICAgICAgICAgICBsaW5lLkZyb20gPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkpICAKICAgICAgICAgICAgICAgIGxpbmUuVG8gPSBWZWN0b3IyLm5ldyh0YXJnZXRQb3MuWCwgdGFyZ2V0UG9zLlkpICAKICAgICAgICAgICAgICAgIGxpbmUuVmlzaWJsZSA9IHRydWUgIAogICAgICAgICAgICBlbHNlICAKICAgICAgICAgICAgICAgIGxpbmUuVmlzaWJsZSA9IGZhbHNlICAtLSBFc2NvbmRlIGEgbGluaGEgc2UgbmluZ3XDqW0gZm9yIGVuY29udHJhZG8gIAogICAgICAgICAgICBlbmQgIAogICAgICAgIGVuZCkgIAogIAogICAgZWxzZWlmIHRlbGVwb3J0RW5hYmxlZCA9PSAxIHRoZW4KICAKICAgICAgICAtLSBSZW1vdmUgYSBsaW5oYSBpbWVkaWF0YW1lbnRlIGFvIHRlbGVwb3J0YXIgIAogICAgICAgIGlmIGxpbmUgdGhlbiAgCiAgICAgICAgICAgIGxpbmU6UmVtb3ZlKCkgIAogICAgICAgICAgICBsaW5lID0gbmlsICAKICAgICAgICBlbmQgIAogIAogICAgICAgIC0tIERlc2NvbmVjdGEgYSBhdHVhbGl6YcOnw6NvIGRhIGxpbmhhICAKICAgICAgICBpZiBjb25uZWN0aW9uIHRoZW4gIAogICAgICAgICAgICBjb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSAgCiAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBuaWwgIAogICAgICAgIGVuZCAgCiAgCiAgICAgICAgLS0gVGVsZXBvcnRhIG8gcGVyc29uYWdlbSBwYXJhIG8gam9nYWRvciBhbHZvICAKICAgICAgICBsb2NhbCBjbG9zZXN0UGxheWVyID0gbmlsICAKICAgICAgICBsb2NhbCBjbG9zZXN0RGlzdCA9IG1hdGguaHVnZSAgCiAgCiAgICAgICAgZm9yIF8sIG90aGVyUGxheWVyIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbyAgCiAgICAgICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBvdGhlclBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuICAKICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFBvcywgb25TY3JlZW4gPSBDYW1lcmE6V29ybGRUb1ZpZXdwb3J0UG9pbnQob3RoZXJQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pICAKICAKICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4gIAogICAgICAgICAgICAgICAgICAgIGxvY2FsIHNjcmVlbkNlbnRlciA9IFZlY3RvcjIubmV3KENhbWVyYS5WaWV3cG9ydFNpemUuWCAvIDIsIENhbWVyYS5WaWV3cG9ydFNpemUuWSAvIDIpICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRTY3JlZW5Qb3MgPSBWZWN0b3IyLm5ldyh0YXJnZXRQb3MuWCwgdGFyZ2V0UG9zLlkpICAKICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHNjcmVlbkNlbnRlciAtIHRhcmdldFNjcmVlblBvcykuTWFnbml0dWRlICAKICAKICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgY2xvc2VzdERpc3QgdGhlbiAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0ID0gZGlzdCAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3RQbGF5ZXIgPSBvdGhlclBsYXllciAgCiAgICAgICAgICAgICAgICAgICAgZW5kICAKICAgICAgICAgICAgICAgIGVuZCAgCiAgICAgICAgICAgIGVuZCAgCiAgICAgICAgZW5kICAKICAKICAgICAgICAtLSBTZSBlbmNvbnRyb3UgbyBqb2dhZG9yLCB0ZWxlcG9ydGEgIAogICAgICAgIGlmIGNsb3Nlc3RQbGF5ZXIgYW5kIGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBjbG9zZXN0UGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgIGxvY2FsIG15Q2hhcmFjdGVyID0gcGxheWVyLkNoYXJhY3RlcgogICAgaWYgbXlDaGFyYWN0ZXIgYW5kIG15Q2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgIC0tIE9wY2lvbmFsOiBUZWxlcG9ydGEgYXRyw6FzIGRvIGpvZ2Fkb3IgdW1hIHZlegogICAgICAgIGxvY2FsIGhycCA9IG15Q2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQKICAgICAgICBsb2NhbCB0YXJnZXRIUlAgPSBjbG9zZXN0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0CiAgICAgICAgbG9jYWwgYmFja09mZnNldCA9IHRhcmdldEhSUC5DRnJhbWUuTG9va1ZlY3RvciAqIC0zCiAgICAgICAgaHJwLkNGcmFtZSA9IHRhcmdldEhSUC5DRnJhbWUgKyBiYWNrT2Zmc2V0CgogICAgICAgIC0tIENvbmV4w6NvIHBhcmEgc2VndWlyIGNvbnRpbnVhbWVudGUKICAgICAgICBpZiBmb2xsb3dDb25uZWN0aW9uIHRoZW4KICAgICAgICAgICAgZm9sbG93Q29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICBlbmQKCiAgICAgICAgZm9sbG93Q29ubmVjdGlvbiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgY2xvc2VzdFBsYXllciBhbmQgY2xvc2VzdFBsYXllci5DaGFyYWN0ZXIgYW5kIGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zID0gY2xvc2VzdFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgbG9jYWwgZm9sbG93UG9zID0gdGFyZ2V0UG9zIC0gKGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAzKQogICAgICAgICAgICAgICAgaHJwLkNGcmFtZSA9IENGcmFtZS5uZXcoZm9sbG93UG9zLCB0YXJnZXRQb3MpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgIGVuZAplbmQKCQkJCQkKCQkJCWVsc2VpZiB0ZWxlcG9ydEVuYWJsZWQgPT0gMiB0aGVuCiAgICAtLSBwYXJhciBkZSBzZWd1aXIKICAgIGlmIGZvbGxvd0Nvbm5lY3Rpb24gdGhlbgogICAgICAgIGZvbGxvd0Nvbm5lY3Rpb246RGlzY29ubmVjdCgpCiAgICAgICAgZm9sbG93Q29ubmVjdGlvbiA9IG5pbAogICAgZW5kCgkJCQllbmQKICAgIAoJCQllbmR9LAogICAgCiAgICAgICAge25hbWUgPSAiVGFyZ2V0aW5nIFRQIiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBjb25uZWN0aW9ucyA9IHt9CiAgICBpZiBub3QgdGVsZXBvcnRFbmFibGVkIHRoZW4KICAgICAgICB0ZWxlcG9ydEVuYWJsZWQgPSB0cnVlCgogICAgICAgIC0tIENyaWEgYSBsaW5oYSBzZSBlbGEgYWluZGEgbsOjbyBleGlzdGlyCiAgICAgICAgaWYgbm90IGxpbmUgdGhlbgogICAgICAgICAgICBsaW5lID0gRHJhd2luZy5uZXcoIkxpbmUiKQogICAgICAgICAgICBsaW5lLlRoaWNrbmVzcyA9IDIKICAgICAgICAgICAgbGluZS5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMCwgMCkKICAgICAgICBlbmQKCiAgICAgICAgLS0gQXR1YWxpemEgYSBsaW5oYSBhIGNhZGEgZnJhbWUKICAgICAgICBjb25uZWN0aW9uID0gUnVuU2VydmljZS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBjbG9zZXN0UGxheWVyID0gbmlsCiAgICAgICAgICAgIGxvY2FsIGNsb3Nlc3REaXN0ID0gbWF0aC5odWdlICAtLSBDb21lw6dhIGNvbSB1bWEgZGlzdMOibmNpYSBtdWl0byBncmFuZGUKCiAgICAgICAgICAgIGZvciBfLCBvdGhlclBsYXllciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICAgICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBvdGhlclBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zLCBvblNjcmVlbiA9IENhbWVyYTpXb3JsZFRvVmlld3BvcnRQb2ludChvdGhlclBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbikKCiAgICAgICAgICAgICAgICAgICAgaWYgb25TY3JlZW4gdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAtLSBDYWxjdWxhIGEgZGlzdMOibmNpYSBkbyBjZW50cm8gZGEgdGVsYQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5DZW50ZXIgPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkgLyAyKQogICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRTY3JlZW5Qb3MgPSBWZWN0b3IyLm5ldyh0YXJnZXRQb3MuWCwgdGFyZ2V0UG9zLlkpCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGRpc3QgPSAoc2NyZWVuQ2VudGVyIC0gdGFyZ2V0U2NyZWVuUG9zKS5NYWduaXR1ZGUKCiAgICAgICAgICAgICAgICAgICAgICAgIC0tIFNlIGZvciBvIG1haXMgcHLDs3hpbW8sIGF0dWFsaXphIG8gYWx2bwogICAgICAgICAgICAgICAgICAgICAgICBpZiBkaXN0IDwgY2xvc2VzdERpc3QgdGhlbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VzdERpc3QgPSBkaXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0UGxheWVyID0gb3RoZXJQbGF5ZXIKICAgICAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCgogICAgICAgICAgICAtLSBTZSBlbmNvbnRyb3UgdW0gam9nYWRvciwgZGVzZW5oYSBhIGxpbmhhCiAgICAgICAgICAgIGlmIGNsb3Nlc3RQbGF5ZXIgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgdGFyZ2V0UG9zID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24pCiAgICAgICAgICAgICAgICBsaW5lLkZyb20gPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkpCiAgICAgICAgICAgICAgICBsaW5lLlRvID0gVmVjdG9yMi5uZXcodGFyZ2V0UG9zLlgsIHRhcmdldFBvcy5ZKQogICAgICAgICAgICAgICAgbGluZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsaW5lLlZpc2libGUgPSBmYWxzZSAgLS0gRXNjb25kZSBhIGxpbmhhIHNlIG5pbmd1w6ltIGZvciBlbmNvbnRyYWRvCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKCiAgICBlbHNlCiAgICAgICAgdGVsZXBvcnRFbmFibGVkID0gZmFsc2UKCiAgICAgICAgLS0gUmVtb3ZlIGEgbGluaGEgaW1lZGlhdGFtZW50ZSBhbyB0ZWxlcG9ydGFyCiAgICAgICAgaWYgbGluZSB0aGVuCiAgICAgICAgICAgIGxpbmU6UmVtb3ZlKCkKICAgICAgICAgICAgbGluZSA9IG5pbAogICAgICAgIGVuZAoKICAgICAgICAtLSBEZXNjb25lY3RhIGEgYXR1YWxpemHDp8OjbyBkYSBsaW5oYQogICAgICAgIGlmIGNvbm5lY3Rpb24gdGhlbgogICAgICAgICAgICBjb25uZWN0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBjb25uZWN0aW9uID0gbmlsCiAgICAgICAgZW5kCgogICAgICAgIC0tIFRlbGVwb3J0YSBvIHBlcnNvbmFnZW0gcGFyYSBvIGpvZ2Fkb3IgYWx2bwogICAgICAgIGxvY2FsIGNsb3Nlc3RQbGF5ZXIgPSBuaWwKICAgICAgICBsb2NhbCBjbG9zZXN0RGlzdCA9IG1hdGguaHVnZQoKICAgICAgICBmb3IgXywgb3RoZXJQbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgIGlmIG90aGVyUGxheWVyIH49IHBsYXllciBhbmQgb3RoZXJQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBvdGhlclBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCB0YXJnZXRQb3MsIG9uU2NyZWVuID0gQ2FtZXJhOldvcmxkVG9WaWV3cG9ydFBvaW50KG90aGVyUGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uKQoKICAgICAgICAgICAgICAgIGlmIG9uU2NyZWVuIHRoZW4KICAgICAgICAgICAgICAgICAgICBsb2NhbCBzY3JlZW5DZW50ZXIgPSBWZWN0b3IyLm5ldyhDYW1lcmEuVmlld3BvcnRTaXplLlggLyAyLCBDYW1lcmEuVmlld3BvcnRTaXplLlkgLyAyKQogICAgICAgICAgICAgICAgICAgIGxvY2FsIHRhcmdldFNjcmVlblBvcyA9IFZlY3RvcjIubmV3KHRhcmdldFBvcy5YLCB0YXJnZXRQb3MuWSkKICAgICAgICAgICAgICAgICAgICBsb2NhbCBkaXN0ID0gKHNjcmVlbkNlbnRlciAtIHRhcmdldFNjcmVlblBvcykuTWFnbml0dWRlCgogICAgICAgICAgICAgICAgICAgIGlmIGRpc3QgPCBjbG9zZXN0RGlzdCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3Nlc3REaXN0ID0gZGlzdAogICAgICAgICAgICAgICAgICAgICAgICBjbG9zZXN0UGxheWVyID0gb3RoZXJQbGF5ZXIKICAgICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKCiAgICAgICAgLS0gU2UgZW5jb250cm91IG8gam9nYWRvciwgdGVsZXBvcnRhCiAgICAgICAgaWYgY2xvc2VzdFBsYXllciBhbmQgY2xvc2VzdFBsYXllci5DaGFyYWN0ZXIgYW5kIGNsb3Nlc3RQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICBsb2NhbCBteUNoYXJhY3RlciA9IHBsYXllci5DaGFyYWN0ZXIKICAgICAgICAgICAgaWYgbXlDaGFyYWN0ZXIgYW5kIG15Q2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbgogICAgICAgICAgICAgICAgbXlDaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBjbG9zZXN0UGxheWVyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgZW5kfSwKfSwKICAgIFsiTUVOVSJdID0gewoJe25hbWUgPSAiR2V0VG9vbHMiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgbG9jYWwgcGxheWVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyCmxvY2FsIGJhY2twYWNrID0gcGxheWVyOldhaXRGb3JDaGlsZCgiQmFja3BhY2siKQoKLS0gQ29udGFpbmVycyBvbmRlIGFzIFRvb2xzIGNvc3R1bWFtIGZpY2FyCmxvY2FsIGx1Z2FyZXMgPSB7CiAgICBnYW1lOkdldFNlcnZpY2UoIldvcmtzcGFjZSIpLAogICAgZ2FtZTpHZXRTZXJ2aWNlKCJSZXBsaWNhdGVkU3RvcmFnZSIpLAogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyUGFjayIpCn0KCmZvciBfLCBsdWdhciBpbiBpcGFpcnMobHVnYXJlcykgZG8KICAgIGZvciBfLCBpdGVtIGluIGlwYWlycyhsdWdhcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIGl0ZW06SXNBKCJUb29sIikgYW5kIGl0ZW06RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIHRoZW4KICAgICAgICAgICAgbG9jYWwgY2xvbmUgPSBpdGVtOkNsb25lKCkKICAgICAgICAgICAgY2xvbmUuUGFyZW50ID0gYmFja3BhY2sKICAgICAgICBlbmQKICAgIGVuZAplbmQKCnByaW50KCJUb2RhcyBhcyB0b29scyBwb3Nzw612ZWlzIGZvcmFtIGNsb25hZGFzIHBybyBzZXUgaW52ZW50w6FyaW8uIikKCgkJCWVuZH0sCgkJCQoJCQkKICAgIAl7bmFtZSA9ICJhbnQtbGFnIiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgIGxhZ1Byb3RlY3Rpb25FbmFibGVkID0gbm90IGxhZ1Byb3RlY3Rpb25FbmFibGVkIC0tIEFsdGVybmEgZW50cmUgYXRpdmFkbyBlIGRlc2F0aXZhZG8KCiAgICAtLSBFeGliZSBhIG5vdGlmaWNhw6fDo28gY29tIMOtY29uZXMgZGlmZXJlbnRlcyBkZXBlbmRlbmRvIGRvIGVzdGFkbwogICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsgIAogICAgICAgIFRpdGxlID0gIkFudGktTGFnIiwgIAogICAgICAgIFRleHQgPSBsYWdQcm90ZWN0aW9uRW5hYmxlZCBhbmQgIkFudCBsYWcgT04iIG9yICJBbnQgbGFnIE9GRiIsICAKICAgICAgICBJY29uID0gbGFnUHJvdGVjdGlvbkVuYWJsZWQgYW5kICJyYnhhc3NldGlkOi8vNjAzMTA3MTA2MyIgb3IgInJieGFzc2V0aWQ6Ly82MDMxMDcxMDUwIiwgIC0tIMONY29uZXMgZGlmZXJlbnRlcyBwYXJhIE9OIGUgT0ZGCiAgICAgICAgRHVyYXRpb24gPSAzICAKICAgIH0pCgogICAgaWYgbGFnUHJvdGVjdGlvbkVuYWJsZWQgdGhlbgogICAgICAgIHByaW50KCJBbnRpLUxhZyBhdGl2YWRvISIpIC0tIE1lbnNhZ2VtIG9wY2lvbmFsIHBhcmEgZGVwdXJhw6fDo28KCiAgICAgICAgLS0gTW9uaXRvcmFyIGUgcmVtb3ZlciBzcGFtIGRlIG9iamV0b3MKICAgICAgICBhbnRpTGFnQ29ubmVjdGlvbiA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciBfLCBvYmogaW4gcGFpcnMod29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgICBpZiBvYmo6SXNBKCJQYXJ0Iikgb3Igb2JqOklzQSgiU291bmQiKSB0aGVuCiAgICAgICAgICAgICAgICAgICAgaWYgb2JqOkdldENoaWxkcmVuKCkgYW5kICNvYmo6R2V0Q2hpbGRyZW4oKSA+IDUwIHRoZW4KICAgICAgICAgICAgICAgICAgICAgICAgb2JqOkRlc3Ryb3koKSAtLSBSZW1vdmUgc3BhbSBkZSBvYmpldG9zCiAgICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQoKICAgICAgICAtLSBEZXRlY3RhciBsb29wcyBkZSBsYWcgZSBzdWF2aXphciBGUFMKICAgICAgICBmcHNQcm90ZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKGRlbHRhVGltZSkKICAgICAgICAgICAgaWYgZGVsdGFUaW1lID4gMC4xIHRoZW4KICAgICAgICAgICAgICAgIHdhcm4oIlBvc3PDrXZlbCBsYWcgZGV0ZWN0YWRvISBMaW1pdGFuZG8gRlBTLi4uIikKICAgICAgICAgICAgICAgIGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpLlJlbmRlclN0ZXBwZWQ6V2FpdCgwLjAzKQogICAgICAgICAgICBlbmQKICAgICAgICBlbmQpCgogICAgICAgIC0tIE1vbml0b3JhciBjb25zdW1vIGRlIG1lbcOzcmlhCiAgICAgICAgbWVtb3J5Q2hlY2sgPSB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgd2hpbGUgbGFnUHJvdGVjdGlvbkVuYWJsZWQgZG8KICAgICAgICAgICAgICAgIGxvY2FsIG1lbW9yeVVzYWdlID0gY29sbGVjdGdhcmJhZ2UoImNvdW50IikgLyAxMDI0CiAgICAgICAgICAgICAgICBpZiBtZW1vcnlVc2FnZSA+IDUwMCB0aGVuCiAgICAgICAgICAgICAgICAgICAgd2FybigiTWVtw7NyaWEgbXVpdG8gYWx0YSEgTGltcGFuZG8gb2JqZXRvcyBpbsO6dGVpcy4uLiIpCiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGdhcmJhZ2UoKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB3YWl0KDUpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKCiAgICBlbHNlCiAgICAgICAgCgogICAgICAgIC0tIERlc2NvbmVjdGFyIG9zIGV2ZW50b3MgcGFyYSBwYXJhciBhIHByb3Rlw6fDo28KICAgICAgICBpZiBhbnRpTGFnQ29ubmVjdGlvbiB0aGVuIGFudGlMYWdDb25uZWN0aW9uOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICBpZiBmcHNQcm90ZWN0aW9uIHRoZW4gZnBzUHJvdGVjdGlvbjpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgaWYgbWVtb3J5Q2hlY2sgdGhlbiB0YXNrLmNhbmNlbChtZW1vcnlDaGVjaykgZW5kCiAgICBlbmQKICAgIAogICAgICAgIGlmIG5vdCBhbnRBRktFbmFibGVkIHRoZW4KICAgICAgICBhbnRBRktFbmFibGVkID0gdHJ1ZQogICAgICAgIHNob3dOb3RpZmljYXRpb24oImFudCBBRksgZW5hYmxlZCIpICAtLSBFeGliZSBhIG5vdGlmaWNhw6fDo28gcXVlIG8gYW50IEFGSyBmb2kgYXRpdmFkbwogICAgICAgIHNwYXduKHByZXZlbnRBRkspICAtLSBDb21lw6dhIGEgcHJldmVuaXIgbyBBRksKICAgIGVsc2UKICAgICAgICBhbnRBRktFbmFibGVkID0gZmFsc2UKICAgICAgICBzaG93Tm90aWZpY2F0aW9uKCJhbnQgQUZLIGRpc2FibGUiKSAgLS0gRXhpYmUgYSBub3RpZmljYcOnw6NvIHF1ZSBvIGFudCBBRksgZm9pIGRlc2F0aXZhZG8KICAgIGVuZAogICAgZW5kfSwKICAgIAogICAge25hbWUgPSAiSXRlbSBJRCIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBsb2NhbCBmdW5jdGlvbiBjcmVhdGVJdGVtSURXaW5kb3coKSAgCiAgICBsb2NhbCBpdGVtV2luZG93ID0gY3JlYXRlV2luZG93KCJJdGVtIElEIiwgVURpbTIubmV3KDAuNSwgMCwgMC4zLCAwKSkgIAogIAogICAgbG9jYWwgVGV4dEJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIsIGl0ZW1XaW5kb3cpICAKICAgIFRleHRCb3guU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDMwKSAgCiAgICBUZXh0Qm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDQwKSAgCiAgICBUZXh0Qm94LlBsYWNlaG9sZGVyVGV4dCA9ICJEaWdpdGUgbyBJRCBkbyBpdGVtIiAgCiAgICBUZXh0Qm94LlRleHQgPSAiIiAgCiAgICBUZXh0Qm94LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKSAgCiAgICBUZXh0Qm94LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KSAgCiAgICBUZXh0Qm94LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucyAgCiAgICBUZXh0Qm94LlRleHRTaXplID0gMTggIAogIAogICAgbG9jYWwgT2tCdXR0b24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iLCBpdGVtV2luZG93KSAgCiAgICBPa0J1dHRvbi5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMzApICAKICAgIE9rQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDgwKSAgCiAgICBPa0J1dHRvbi5UZXh0ID0gIk9LIiAgCiAgICBPa0J1dHRvbi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzAsIDMwLCAzMCkgIAogICAgT2tCdXR0b24uVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpICAKICAgIE9rQnV0dG9uLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQgIAogICAgT2tCdXR0b24uVGV4dFNpemUgPSAxOCAgCiAgCiAgICBPa0J1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgIAogICAgbG9jYWwgaXRlbUlEID0gdG9udW1iZXIoVGV4dEJveC5UZXh0KSAtLSBDb252ZXJ0ZSBwYXJhIG7Dum1lcm8gIAogICAgaWYgaXRlbUlEIHRoZW4gIAogICAgICAgIGxvY2FsIHJlbW90ZSA9IGdhbWUuUmVwbGljYXRlZFN0b3JhZ2U6RmluZEZpcnN0Q2hpbGQoIkdpdmVJdGVtIikgLS0gTm9tZSBkbyBldmVudG8gcmVtb3RvICAKICAgICAgICBpZiByZW1vdGUgdGhlbiAgCiAgICAgICAgICAgIHJlbW90ZTpGaXJlU2VydmVyKGl0ZW1JRCkgIAogICAgICAgICAgICAtLSBOb3RpZmljYcOnw6NvIGRlIHN1Y2Vzc28gIAogICAgICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJHdWkiKTpTZXRDb3JlKCJTZW5kTm90aWZpY2F0aW9uIiwgeyAgCiAgICAgICAgICAgICAgICBUaXRsZSA9ICJTdWNlc3MhIiwgIAogICAgICAgICAgICAgICAgVGV4dCA9ICJUZW50YW5kbyBwZWdhciBvIGl0ZW0gY29tIElEOiAiIC4uIGl0ZW1JRCwgIAogICAgICAgICAgICAgICAgSWNvbiA9ICJyYnhhc3NldGlkOi8vNjAzMTA2ODQyNyIsIC0tIFN1YnN0aXR1YSBwb3IgdW0gw61jb25lLCBvdSBkZWl4ZSBlbSBicmFuY28gIAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzICAKICAgICAgICAgICAgfSkgIAogICAgICAgIGVsc2UgIAogICAgICAgICAgICAtLSBOb3RpZmljYcOnw6NvIGRlIGVycm8gKGV2ZW50byBuw6NvIGVuY29udHJhZG8pICAKICAgICAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIik6U2V0Q29yZSgiU2VuZE5vdGlmaWNhdGlvbiIsIHsgIAogICAgICAgICAgICAgICAgVGl0bGUgPSAiRXJybyIsICAKICAgICAgICAgICAgICAgIFRleHQgPSAiRXZlbnRvIHJlbW90byAnR2l2ZUl0ZW0nIG7Do28gZW5jb250cmFkby4iLCAgCiAgICAgICAgICAgICAgICBJY29uID0gInJieGFzc2V0aWQ6Ly82MDMxMjgwODgyIiwgIAogICAgICAgICAgICAgICAgRHVyYXRpb24gPSAzICAKICAgICAgICAgICAgfSkgIAogICAgICAgIGVuZCAgCiAgICBlbHNlICAKICAgICAgICAtLSBOb3RpZmljYcOnw6NvIGRlIGVycm8gKElEIGludsOhbGlkbykgIAogICAgICAgIGdhbWU6R2V0U2VydmljZSgiU3RhcnRlckd1aSIpOlNldENvcmUoIlNlbmROb3RpZmljYXRpb24iLCB7ICAKICAgICAgICAgICAgVGl0bGUgPSAiRXJybyIsICAKICAgICAgICAgICAgVGV4dCA9ICJQb3IgZmF2b3IsIGRpZ2l0ZSB1bSBuw7ptZXJvIHbDoWxpZG8uIiwgIAogICAgICAgICAgICBJY29uID0gInJieGFzc2V0aWQ6Ly82MDMxMDk0Njc4IiwgIAogICAgICAgICAgICBEdXJhdGlvbiA9IDMgIAogICAgICAgIH0pICAKICAgIGVuZCAgCmVuZCkgIAplbmQgCmVuZH0sCiAgICAKICAgIAogICAgCiAgICB9LAogICAgICAgIFsiM0QiXSA9IHsKCQl7bmFtZSA9ICJPYmplY3QgRGVzdHJveSIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBsaW5lQWN0aXZlID0gbm90IGxpbmVBY3RpdmUgIC0tIEFsdGVybmEgZW50cmUgYXRpdmFkbyBlIGRlc2F0aXZhZG8KCiAgICBpZiBsaW5lQWN0aXZlIHRoZW4KICAgICAgICAtLSBDcmlhciBhIGxpbmhhCiAgICAgICAgbG9jYWwgY2FtZXJhID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYQogICAgICAgIGxvY2FsIHBsYXllciA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllcgogICAgICAgIGxvY2FsIG1vdXNlID0gcGxheWVyOkdldE1vdXNlKCkKCiAgICAgICAgbGluZSA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICAgICAgbGluZS5TaXplID0gVmVjdG9yMy5uZXcoMC4xLCAwLjEsIDUwMCkgIC0tIENvbXByaW1lbnRvIGRhIGxpbmhhCiAgICAgICAgbGluZS5BbmNob3JlZCA9IHRydWUKICAgICAgICBsaW5lLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgIGxpbmUuQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJCcmlnaHQgcmVkIikKICAgICAgICBsaW5lLk1hdGVyaWFsID0gRW51bS5NYXRlcmlhbC5OZW9uCiAgICAgICAgbGluZS5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQoKICAgICAgICAtLSBBdHVhbGl6YSBhIGxpbmhhIGUgZGV0ZWN0YSBvIG9iamV0byB0b2NhZG8KICAgICAgICBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBsaW5lQWN0aXZlIGFuZCBjYW1lcmEgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgb3JpZ2luID0gY2FtZXJhLkNGcmFtZS5Qb3NpdGlvbgogICAgICAgICAgICAgICAgbG9jYWwgZGlyZWN0aW9uID0gY2FtZXJhLkNGcmFtZS5Mb29rVmVjdG9yICogNTAwICAtLSBFeHRlbnPDo28gZGEgbGluaGEKCiAgICAgICAgICAgICAgICAtLSBEZWZpbmUgYSBwb3Npw6fDo28gZSByb3Rhw6fDo28gZGEgbGluaGEKICAgICAgICAgICAgICAgIGxpbmUuUG9zaXRpb24gPSBvcmlnaW4gKyAoZGlyZWN0aW9uIC8gMikKICAgICAgICAgICAgICAgIGxpbmUuQ0ZyYW1lID0gQ0ZyYW1lLmxvb2tBdChvcmlnaW4sIG9yaWdpbiArIGRpcmVjdGlvbikKCiAgICAgICAgICAgICAgICAtLSBSYXljYXN0IHBhcmEgZW5jb250cmFyIG8gb2JqZXRvIHRvY2FkbwogICAgICAgICAgICAgICAgbG9jYWwgcmF5ID0gUmF5Lm5ldyhvcmlnaW4sIGRpcmVjdGlvbikKICAgICAgICAgICAgICAgIGxvY2FsIGhpdCwgcG9zaXRpb24gPSBnYW1lLldvcmtzcGFjZTpGaW5kUGFydE9uUmF5KHJheSwgcGxheWVyLkNoYXJhY3RlcikKCiAgICAgICAgICAgICAgICBpZiBoaXQgdGhlbgogICAgICAgICAgICAgICAgICAgIHRhcmdldE9iamVjdCA9IGhpdCAgLS0gU2FsdmEgbyBvYmpldG8gdG9jYWRvCiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gbmlsCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgZWxzZQogICAgICAgIC0tIERlc2F0aXZhIGEgbGluaGEgZSBhcGFnYSBvIG9iamV0byBzZSBlc3RpdmVyIHRvY2FuZG8gYWxnbwogICAgICAgIGlmIGxpbmUgdGhlbgogICAgICAgICAgICBsaW5lOkRlc3Ryb3koKQogICAgICAgICAgICBsaW5lID0gbmlsCiAgICAgICAgZW5kCgogICAgICAgIGlmIHRhcmdldE9iamVjdCB0aGVuCiAgICAgICAgICAgIHRhcmdldE9iamVjdDpEZXN0cm95KCkgIC0tIFJlbW92ZSBvIG9iamV0byBkbyBqb2dvCiAgICAgICAgICAgIHRhcmdldE9iamVjdCA9IG5pbAogICAgICAgIGVuZAogICAgZW5kCmVuZH0sCgoKCgoKCi0tIFZhcmnDoXZlaXMgbm8gdG9wbyBkbyBzY3JpcHQ6CgoKe25hbWUgPSAiT3JiaXQgTGlnaHQiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgb3JiaXRFbmFibGVkID0gbm90IG9yYml0RW5hYmxlZAoKICAgIGlmIG9yYml0RW5hYmxlZCB0aGVuCiAgICAgICAgLS0gUGFyw6JtZXRyb3MgaW5pY2lhaXMKICAgICAgICBsb2NhbCByYWRpdXMgPSAzIC0tIGNvbnRpbnVhIHNlbmRvIG8gcmFpbyBkYSDDs3JiaXRhCiAgICAgICAgbG9jYWwgbGlnaHRSYW5nZSA9IDUwIC0tIGFsY2FuY2UgZGEgbHV6IChzbGlkZXIgMSkKICAgICAgICBsb2NhbCBpbnRlbnNpdHkgPSAyLjUgLS0gaW50ZW5zaWRhZGUgZGEgbHV6IChzbGlkZXIgMikKICAgICAgICBsb2NhbCBodWUgPSAwCgogICAgICAgIC0tIENyaWEgc2xpZGVycyBubyBleHRyYVBhbmVsCiAgICAgICAgZXh0cmFQYW5lbC5WaXNpYmxlID0gdHJ1ZQogICAgICAgIGV4dHJhUGFuZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKCiAgICAgICAgY3JpYXJOb3ZvU2xpZGVyKCJPcmJpdCAtIEFsY2FuY2UgZGEgTHV6IiwgMCwgOTk5OTksIGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGxpZ2h0UmFuZ2UgPSB2CiAgICAgICAgZW5kKQogICAgICAgIGNyaWFyTm92b1NsaWRlcigiT3JiaXQgLSBJbnRlbnNpZGFkZSIsIDAsIDk5OTk5LCBmdW5jdGlvbih2KQogICAgICAgICAgICBpbnRlbnNpdHkgPSB2CiAgICAgICAgZW5kKQogICAgICAgIGNyaWFyTm92b1NsaWRlcigiT3JiaXQgLSBDb3IiLCAwLCAzNjAsIGZ1bmN0aW9uKHYpCiAgICAgICAgICAgIGh1ZSA9IHYKICAgICAgICBlbmQpCiAgICAgICAgb3JiaXRTbGlkZXJzQ3JpYWRvcyA9IHRydWUKCiAgICAgICAgLS0gRnVuw6fDo28gZGUgSFVF4oaSQ29sb3IzCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gaHVlVG9Db2xvcihoKQogICAgICAgICAgICByZXR1cm4gQ29sb3IzLmZyb21IU1YoaC8zNjAsIGh1ZSwgMSkKICAgICAgICBlbmQKCmxvY2FsIGNoYXIgPSBnYW1lLlBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCmlmIGNoYXIgYW5kIGNoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICBsb2NhbCBocnAgPSBjaGFyLkh1bWFub2lkUm9vdFBhcnQKCiAgICAtLSBjcmlhciBibG9jbyArIGx1egogICAgbG9jYWwgYmxvY2sgPSBJbnN0YW5jZS5uZXcoIlBhcnQiLCB3b3Jrc3BhY2UpCiAgICBibG9jay5TaXplID0gVmVjdG9yMy5uZXcoMC4yLCAwLjIsIDAuMikKICAgIGJsb2NrLkFuY2hvcmVkID0gdHJ1ZQogICAgYmxvY2suTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24KCiAgICBsb2NhbCBsaWdodCA9IEluc3RhbmNlLm5ldygiUG9pbnRMaWdodCIsIGJsb2NrKQogICAgbGlnaHQuQnJpZ2h0bmVzcyA9IGludGVuc2l0eQogICAgbGlnaHQuUmFuZ2UgPSByYWRpdXMKICAgIGxpZ2h0LkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCiAgICB0YWJsZS5pbnNlcnQob3JiaXRMaWdodEJsb2Nrcywge2Jsb2NrID0gYmxvY2ssIGxpZ2h0ID0gbGlnaHQsIGhycCA9IGhycH0pCmVuZAoKCgogICAgICAgIC0tIExvb3AgZGUgYXR1YWxpemHDp8OjbwogICAgICAgIGxvY2FsIGFuZ2xlID0gMAogICAgICAgIGxvY2FsIGNvbm4gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5SZW5kZXJTdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oZHQpCiAgICAgICAgICAgIGFuZ2xlID0gYW5nbGUgKyBkdCAqIDIgIC0tIHZlbG9jaWRhZGUgZml4YSAyCiAgICAgICAgICAgIGZvciBfLCBkYXRhIGluIGlwYWlycyhvcmJpdExpZ2h0QmxvY2tzKSBkbwogICAgICAgICAgICAgICAgbG9jYWwgb2ZmWCA9IG1hdGguY29zKGFuZ2xlKSAqIHJhZGl1cwogICAgICAgICAgICAgICAgbG9jYWwgb2ZmWiA9IG1hdGguc2luKGFuZ2xlKSAqIHJhZGl1cwogICAgICAgICAgICAgICAgZGF0YS5ibG9jay5Qb3NpdGlvbiA9IGRhdGEuaHJwLlBvc2l0aW9uICsgVmVjdG9yMy5uZXcob2ZmWCwgMCwgb2ZmWikKICAgICAgICAgICAgICAgIGRhdGEubGlnaHQuUmFuZ2UgPSBsaWdodFJhbmdlCiAgICAgICAgICAgICAgICBkYXRhLmxpZ2h0LkJyaWdodG5lc3MgPSBpbnRlbnNpdHkKICAgICAgICAgICAgICAgIGRhdGEubGlnaHQuQ29sb3IgPSBodWVUb0NvbG9yKGh1ZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICAgIHRhYmxlLmluc2VydChvcmJpdENvbm5lY3Rpb25zLCBjb25uKQoKICAgIGVsc2UKICAgICAgICAtLSBEZXNsaWdhIG9yYml0IGUgbGltcGEgdHVkbwogICAgICAgIGZvciBfLCBjIGluIGlwYWlycyhvcmJpdENvbm5lY3Rpb25zKSBkbwogICAgICAgICAgICBjOkRpc2Nvbm5lY3QoKQogICAgICAgIGVuZAogICAgICAgIG9yYml0Q29ubmVjdGlvbnMgPSB7fQoKICAgICAgICAtLSBEZXN0cm9pIGJsb2NvcyBkZSBsdXoKICAgICAgICBmb3IgXywgZGF0YSBpbiBpcGFpcnMob3JiaXRMaWdodEJsb2NrcykgZG8KICAgICAgICAgICAgaWYgZGF0YS5ibG9jayB0aGVuIGRhdGEuYmxvY2s6RGVzdHJveSgpIGVuZAogICAgICAgIGVuZAogICAgICAgIG9yYml0TGlnaHRCbG9ja3MgPSB7fQoKICAgICAgICAtLSBEZXN0cm9pIHNsaWRlcnMgY3JpYWRvcwogICAgICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMoZXh0cmFQYW5lbDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBjaGlsZDpJc0EoIkZyYW1lIikgYW5kIGNoaWxkOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVGV4dExhYmVsIikKICAgICAgICAgICAgICAgYW5kIGNoaWxkOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVGV4dExhYmVsIikuVGV4dDptYXRjaCgiXk9yYml0IikgdGhlbgogICAgICAgICAgICAgICAgY2hpbGQ6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIG9yYml0U2xpZGVyc0NyaWFkb3MgPSBmYWxzZQoKICAgICAgICAtLSBPY3VsdGEgZXh0cmFQYW5lbCBzZSB2YXppbwogICAgICAgIGlmICNleHRyYVBhbmVsOkdldENoaWxkcmVuKCkgPT0gMCB0aGVuCiAgICAgICAgICAgIGV4dHJhUGFuZWwuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICBlbmQKZW5kfSwKCgoKICAgICAgICAKCgogICAgICAgIHtuYW1lID0gIk9yYml0IExpZ2h0IiwgZnVuYyA9IGZ1bmN0aW9uKCkKICAgICAgICAKICAgIAogICAgaWYgbm90IGhycCB0aGVuIHJldHVybiBlbmQgLS0gRXZpdGEgZXJyb3MgY2FzbyBvIEhSUCBuw6NvIGV4aXN0YQoKICAgIC0tIENyaWFyIG8gYmxvY28gZGUgbHV6CiAgICBsb2NhbCBsaWdodEJsb2NrID0gSW5zdGFuY2UubmV3KCJQYXJ0IikKICAgIGxpZ2h0QmxvY2suU2l6ZSA9IFZlY3RvcjMubmV3KDAuMiwwLjIsMC4yKSAtLSBUYW1hbmhvIGRvIGJsb2NvCiAgICBsaWdodEJsb2NrLkFuY2hvcmVkID0gdHJ1ZSAtLSBQcmVjaXNhIGVzdGFyIGFuY29yYWRvIHBhcmEgb3JiaXRhciBjb3JyZXRhbWVudGUKICAgIGxpZ2h0QmxvY2suTWF0ZXJpYWwgPSBFbnVtLk1hdGVyaWFsLk5lb24gLS0gRMOhIHVtIGVmZWl0byBicmlsaGFudGUKICAgIGxpZ2h0QmxvY2suQnJpY2tDb2xvciA9IEJyaWNrQ29sb3IubmV3KCJCcmlnaHQgd2hpdGUiKSAtLSBDb3IgZG8gYmxvY28KICAgIGxpZ2h0QmxvY2suUGFyZW50ID0gZ2FtZS5Xb3Jrc3BhY2UKCiAgICAtLSBDcmlhciBhIGx1eiBkZW50cm8gZG8gYmxvY28KICAgIGxvY2FsIGxpZ2h0ID0gSW5zdGFuY2UubmV3KCJQb2ludExpZ2h0IikKICAgIGxpZ2h0LlBhcmVudCA9IGxpZ2h0QmxvY2sKICAgIGxpZ2h0LkJyaWdodG5lc3MgPSAyLjUgLS0gSW50ZW5zaWRhZGUgZGEgbHV6CiAgICBsaWdodC5SYW5nZSA9IDUwIC0tIEFsY2FuY2UgZGEgbHV6CiAgICBsaWdodC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpIC0tIENvciBkYSBsdXoKCiAgICAtLSBWYXJpw6F2ZWlzIHBhcmEgw7NyYml0YQogICAgbG9jYWwgcmFkaXVzID0gMyAtLSBEaXN0w6JuY2lhIGRvIGJsb2NvIGVtIHJlbGHDp8OjbyBhbyBwZXJzb25hZ2VtCiAgICBsb2NhbCBzcGVlZCA9IDIgLS0gVmVsb2NpZGFkZSBkYSDDs3JiaXRhCiAgICBsb2NhbCBhbmdsZSA9IDAKCiAgICAtLSBBdHVhbGl6YXIgYSBwb3Npw6fDo28gZG8gYmxvY28gYSBjYWRhIGZyYW1lCiAgICBsb2NhbCBjb25uZWN0aW9uCiAgICBjb25uZWN0aW9uID0gZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKGRlbHRhVGltZSkKICAgICAgICBpZiBocnAuUGFyZW50IHRoZW4KICAgICAgICAgICAgYW5nbGUgPSBhbmdsZSArIHNwZWVkICogZGVsdGFUaW1lIC0tIEF0dWFsaXphIG8gw6JuZ3VsbyBhbyBsb25nbyBkbyB0ZW1wbwogICAgICAgICAgICBsb2NhbCBvZmZzZXRYID0gbWF0aC5jb3MoYW5nbGUpICogcmFkaXVzCiAgICAgICAgICAgIGxvY2FsIG9mZnNldFogPSBtYXRoLnNpbihhbmdsZSkgKiByYWRpdXMKICAgICAgICAgICAgbGlnaHRCbG9jay5Qb3NpdGlvbiA9IGhycC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KG9mZnNldFgsIDAsIG9mZnNldFopIC0tIE1hbnTDqW0gbyBibG9jbyBhY2ltYSBkbyBwZXJzb25hZ2VtCiAgICAgICAgZWxzZQogICAgICAgICAgICAtLSBTZSBvIHBlcnNvbmFnZW0gbW9ycmVyIG91IGRlc2FwYXJlY2VyLCByZW1vdmUgbyBibG9jbyBlIGRlc2NvbmVjdGEKICAgICAgICAgICAgY29ubmVjdGlvbjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgbGlnaHRCbG9jazpEZXN0cm95KCkKICAgICAgICBlbmQKICAgIGVuZCkKZW5kfSwKCiAgICAgICAge25hbWUgPSAiTGlnaHQiLCBmdW5jID0gZnVuY3Rpb24oKQogICAgbG9jYWwgbGlnaHRCbG9jayA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICBsaWdodEJsb2NrLlNpemUgPSBWZWN0b3IzLm5ldygwLjIsMC4yLDAuMikgLS0gVGFtYW5obyBkbyBibG9jbwogICAgbGlnaHRCbG9jay5Qb3NpdGlvbiA9IGdhbWUuUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDUsIDApIC0tIFBvc2nDp8OjbyBpbmljaWFsCiAgICBsaWdodEJsb2NrLkFuY2hvcmVkID0gZmFsc2UgLS0gSGFiaWxpdGEgZsOtc2ljYQogICAgbGlnaHRCbG9jay5NYXRlcmlhbCA9IEVudW0uTWF0ZXJpYWwuTmVvbiAtLSBEw6EgdW0gZWZlaXRvIGJyaWxoYW50ZQogICAgbGlnaHRCbG9jay5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIkJyaWdodCB3aGl0ZSIpIC0tIENvciBkbyBibG9jbwogICAgbGlnaHRCbG9jay5QYXJlbnQgPSBnYW1lLldvcmtzcGFjZQoKICAgIC0tIENyaWFyIGEgbHV6IGRlbnRybyBkbyBibG9jbwogICAgbG9jYWwgbGlnaHQgPSBJbnN0YW5jZS5uZXcoIlBvaW50TGlnaHQiKQogICAgbGlnaHQuUGFyZW50ID0gbGlnaHRCbG9jawogICAgbGlnaHQuQnJpZ2h0bmVzcyA9IDUgLS0gSW50ZW5zaWRhZGUgZGEgbHV6CiAgICBsaWdodC5SYW5nZSA9IDUwIC0tIEFsY2FuY2UgZGEgbHV6CiAgICBsaWdodC5Db2xvciA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpIC0tIENvciBkYSBsdXoKCiAgICAtLSBBcGxpY2FyIHVtYSBmb3LDp2EgaW5pY2lhbCBwYXJhIG8gYmxvY28gY2FpciBuYXR1cmFsbWVudGUKICAgIGxvY2FsIGJvZHlWZWxvY2l0eSA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgIGJvZHlWZWxvY2l0eS5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KG1hdGgucmFuZG9tKC0xMCwgMTApLCA1LCBtYXRoLnJhbmRvbSgtMTAsIDEwKSkgLS0gTW92aW1lbnRvIGluaWNpYWwgYWxlYXTDs3JpbwogICAgYm9keVZlbG9jaXR5Lk1heEZvcmNlID0gVmVjdG9yMy5uZXcoNDAwMCwgNDAwMCwgNDAwMCkgLS0gRm9yw6dhIG3DoXhpbWEgcGFyYSBlbXB1cnJhciBvIGJsb2NvCiAgICBib2R5VmVsb2NpdHkuUGFyZW50ID0gbGlnaHRCbG9jawoKICAgIC0tIFJlbW92ZXIgYSBmb3LDp2EgYXDDs3MgMC4xIHNlZ3VuZG9zIHBhcmEgYSBmw61zaWNhIG5vcm1hbCBhZ2lyCiAgICB0YXNrLmRlbGF5KDAuMSwgZnVuY3Rpb24oKQogICAgICAgIGJvZHlWZWxvY2l0eTpEZXN0cm95KCkKICAgIGVuZCkKICAgIGVuZH0sCiAgICAKICAgIHtuYW1lID0gIkN1Ym8iLCBmdW5jID0gZnVuY3Rpb24oKQogICAgbG9jYWwgY3ViZSA9IEluc3RhbmNlLm5ldygiUGFydCIsIGdhbWUuV29ya3NwYWNlKQogICAgY3ViZS5TaXplID0gVmVjdG9yMy5uZXcoNSwgNSwgNSkKICAgIGN1YmUuUG9zaXRpb24gPSBjaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5Qb3NpdGlvbiArIFZlY3RvcjMubmV3KDAsIDAsIC01KQogICAgY3ViZS5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIkJyaWdodCB3aGl0ZSIpCiAgICBjdWJlLkFuY2hvcmVkID0gdHJ1ZQogICAgZW5kfSwKICAgIHtuYW1lID0gInNwaGVyZSIsIGZ1bmMgPSBmdW5jdGlvbigpCiAgICBsb2NhbCBzcGhlcmUgPSBJbnN0YW5jZS5uZXcoIlBhcnQiLCBnYW1lLldvcmtzcGFjZSkKICAgIHNwaGVyZS5TaGFwZSA9IEVudW0uUGFydFR5cGUuQmFsbAogICAgc3BoZXJlLlNpemUgPSBWZWN0b3IzLm5ldyg1LCA1LCA1KQogICAgc3BoZXJlLlBvc2l0aW9uID0gY2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLCAwLCAtNSkKICAgIHNwaGVyZS5Ccmlja0NvbG9yID0gQnJpY2tDb2xvci5uZXcoIkJyaWdodCBibHVlIikKICAgIHNwaGVyZS5BbmNob3JlZCA9IHRydWUKICAgIGVuZH0sCiAgICAgICAgCn0sCgp9CiAgICAKaWYgI2V4dHJhUGFuZWw6R2V0Q2hpbGRyZW4oKSA9PSAwIHRoZW4KICAgIGV4dHJhUGFuZWwuVmlzaWJsZSA9IGZhbHNlCmVuZAoKLS0gRXZlbnRvIHBhcmEgcGVybWl0aXIgbyBwdWxvIG5vIGFyIChmb3JhIGRhIHRhYmVsYSBkbyBib3TDo28pCmdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpLkp1bXBSZXF1ZXN0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgbG9jYWwgY2hhcmFjdGVyID0gZ2FtZS5QbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgaWYgY2hhcmFjdGVyIHRoZW4KICAgICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBpZiBodW1hbm9pZCBhbmQgYWxsb3dBaXJKdW1wIHRoZW4KICAgICAgICAgICAgaWYgaHVtYW5vaWQ6R2V0U3RhdGUoKSA9PSBFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkZyZWVmYWxsIHRoZW4KICAgICAgICAgICAgICAgIGh1bWFub2lkOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuSnVtcGluZykgLS0gUGVybWl0ZSBwdWxhciBubyBhcgogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAplbmQpCgoKCi0tIEZ1bsOnw6NvIHBhcmEgbGltcGFyIG9zIGJvdMO1ZXMgZGUgYcOnw6NvIGV4aXN0ZW50ZXMgbm8gcGFpbmVsIGRpcmVpdG8KbG9jYWwgZnVuY3Rpb24gY2xlYXJSaWdodFBhbmVsKCkKICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMocmlnaHRQYW5lbDpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIG5vdCBjaGlsZDpJc0EoIlVJTGlzdExheW91dCIpIHRoZW4KICAgICAgICAgICAgY2hpbGQ6RGVzdHJveSgpCiAgICAgICAgZW5kCiAgICBlbmQKZW5kCgotLSBGdW7Dp8OjbyBwYXJhIGNhcnJlZ2FyIGFzIGHDp8O1ZXMgZGUgdW1hIGNhdGVnb3JpYSBubyBwYWluZWwgZGlyZWl0bwpsb2NhbCBmdW5jdGlvbiBjbGVhclJpZ2h0UGFuZWwoKQogICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyhyaWdodFBhbmVsOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgbm90IGNoaWxkOklzQSgiVUlMaXN0TGF5b3V0IikgdGhlbgogICAgICAgICAgICBjaGlsZDpEZXN0cm95KCkKICAgICAgICBlbmQKICAgIGVuZAplbmQKCi0tIEZ1bsOnw6NvIHBhcmEgY2FycmVnYXIgYXMgYcOnw7VlcyBkZSB1bWEgY2F0ZWdvcmlhIG5vIHBhaW5lbCBkaXJlaXRvCmxvY2FsIGZ1bmN0aW9uIGxvYWRBY3Rpb25zKGNhdGVnb3J5TmFtZSkKICAgIGNsZWFyUmlnaHRQYW5lbCgpCiAgICBsb2NhbCBhY3Rpb25zID0gY2F0ZWdvcmllc1tjYXRlZ29yeU5hbWVdCiAgICBpZiBhY3Rpb25zIHRoZW4KICAgICAgICBmb3IgXywgYWN0aW9uIGluIGlwYWlycyhhY3Rpb25zKSBkbwogICAgICAgICAgICBjcmVhdGVCdXR0b24ocmlnaHRQYW5lbCwgYWN0aW9uLm5hbWUsIGFjdGlvbi5mdW5jKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKLS0gRnVuw6fDo28gcGFyYSBjcmlhciBvcyBib3TDtWVzIGRlIGNhdGVnb3JpYXMgbm8gcGFpbmVsIGVzcXVlcmRvCmxvY2FsIGZ1bmN0aW9uIGxvYWRDYXRlZ29yaWVzKCkKICAgIGZvciBjYXRlZ29yeU5hbWUsIF8gaW4gcGFpcnMoY2F0ZWdvcmllcykgZG8KICAgICAgICBjcmVhdGVCdXR0b24obGVmdFBhbmVsLCBjYXRlZ29yeU5hbWUsIGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9hZEFjdGlvbnMoY2F0ZWdvcnlOYW1lKQogICAgICAgIGVuZCkKICAgIGVuZAplbmQKCi0tIEluaWNpYWxpemEgb3MgYm90w7VlcyBkZSBjYXRlZ29yaWFzIGUgY2FycmVnYSB1bWEgY2F0ZWdvcmlhIHBhZHLDo28gKGEgcHJpbWVpcmEgZW5jb250cmFkYSkKLS0gYXDDs3MgYSBjcmlhw6fDo28gZG8gbWFpbkZyYW1lLCBsZWZ0UGFuZWwgZSByaWdodFBhbmVsCgotLSBjcmlhIG9zIGJvdMO1ZXMgZGFzIGNhdGVnb3JpYXMKCmxvYWRDYXRlZ29yaWVzKCkKCnByaW50KCJDYXRlZ29yaWFzIGRldGVjdGFkYXM6IikKZm9yIG5hbWUsIGFjdGlvbnMgaW4gcGFpcnMoY2F0ZWdvcmllcykgZG8KICAgIHByaW50KCJDYXRlZ29yaWE6IiwgbmFtZSkKICAgIGZvciBfLCBhY3Rpb24gaW4gaXBhaXJzKGFjdGlvbnMpIGRvCiAgICAgICAgcHJpbnQoIiAtIEHDp8OjbzoiLCBhY3Rpb24ubmFtZSkKICAgIGVuZAplbmQKCmZvciBjYXRlZ29yeU5hbWUsIF8gaW4gcGFpcnMoY2F0ZWdvcmllcykgZG8KICAgIGxvYWRBY3Rpb25zKGNhdGVnb3J5TmFtZSkKICAgIGJyZWFrCmVuZAoK"
loadstring(game:GetService("HttpService"):Base64Decode(encoded))()
